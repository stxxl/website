<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>STXXL: FAQ - Frequently Asked Questions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STXXL
   &#160;<span id="projectnumber">1.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('faq.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FAQ - Frequently Asked Questions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="faq_latest"></a>
Latest version of this FAQ</h1>
<p>The most recent version of this FAQ can always be found <a href="http://stxxl.sourceforge.net">here</a>.</p>
<h1><a class="anchor" id="faq_compilers"></a>
Supported Compilers and Platforms</h1>
<p>The following compilers have been tested in different <code>STXXL</code> configurations. Other compilers might work, too, but we don't have the resources (systems, compilers or time) to test them. Feedback is welcome.</p>
<p>Please note that from STXXL 1.4.0 on, only 64-bit systems are fully supported. Compilation on 32-bit seems to work, but we cannot support it anymore.</p>
<p>The compilers marked with '*' are the maintainers' favorite choices and are most thoroughly tested.</p>
<table class="doxtable">
<tr>
<th>compiler </th><th>supported options  </th></tr>
<tr>
<td>gcc 4.9.1 </td><td>stxxl parallel (boost) (c++11) </td></tr>
<tr>
<td>gcc 4.8.3 * </td><td>stxxl parallel (boost) (c++11) </td></tr>
<tr>
<td>gcc 4.7.3 </td><td>stxxl parallel (boost) (c++0x) </td></tr>
<tr>
<td>gcc 4.6.4 </td><td>stxxl parallel (boost) (c++0x) </td></tr>
<tr>
<td>gcc 4.5.4 </td><td>stxxl parallel (boost) (c++0x) </td></tr>
<tr>
<td>gcc 4.4.7 </td><td>stxxl parallel (boost) (c++0x) </td></tr>
<tr>
<td>gcc 4.3.6 </td><td>stxxl (boost) </td></tr>
<tr>
<td>gcc 4.1.2 </td><td>stxxl (boost) </td></tr>
<tr>
<td>gcc 3.4.6 </td><td>stxxl (boost) </td></tr>
<tr>
<td>gcc 3.3 </td><td>unsupported </td></tr>
<tr>
<td>icpc 2015.0.090 * </td><td>stxxl (boost) (c++0x) </td></tr>
<tr>
<td>icpc 2013.5.192 * </td><td>stxxl (boost) (c++0x) </td></tr>
<tr>
<td>icpc 2011.13.367 </td><td>stxxl (boost) (c++0x) </td></tr>
<tr>
<td>clang++ 3.2, 3.3, 3.4.2 </td><td>stxxl (boost) (c++0x) </td></tr>
<tr>
<td>mingw-w64 gcc 4.8.3 </td><td>stxxl parallel (boost) (c++11) </td></tr>
<tr>
<td>cygwin gcc 4.8.3 </td><td>stxxl parallel (boost) (c++11) </td></tr>
<tr>
<td>msvc 2013 12.0 * </td><td>stxxl (boost) (c++11) </td></tr>
<tr>
<td>msvc 2012 11.0 </td><td>stxxl (boost) (c++0x) </td></tr>
<tr>
<td>msvc 2010 10.0 </td><td>stxxl boost required </td></tr>
</table>
<ul>
<li>The option "parallel" uses the __gnu_parallel extensions in some parts of STXXL. For all <code>gcc</code> versions &gt;= 4.4 the __gnu_parallel extensions are ON by default. Support for MCSTL (predecessor of __gnu_parallel) was removed in STXXL 1.4.0.</li>
<li>Boost is optional and not recommended on all systems, except MSVC 2010. It provides no advantages on other platforms. <br/>
 STXXL has been tested with Boost 1.40.0, 1.42.0 and 1.46.1. Other versions may work, too, but older versions will not get support.</li>
<li>Support for C++0x and C++11 is integrated and automatically detected. No core parts of STXXL require C++11.</li>
<li>All options are automatically detected by CMake.</li>
</ul>
<h1><a class="anchor" id="faq_credit"></a>
How can I credit STXXL, and thus foster its development?</h1>
<ul>
<li>For all users:<ul>
<li>Sign up at Ohloh and add yourself as an STXXL user / rate STXXL: <a href="http://www.ohloh.net/p/stxxl">http://www.ohloh.net/p/stxxl</a></li>
<li>Rate STXXL at heise Software-Verzeichnis (German): <a href="http://www.heise.de/software/download/stxxl/76072">http://www.heise.de/software/download/stxxl/76072</a></li>
<li>Rate STXXL at SourceForge: <a href="https://sourceforge.net/projects/stxxl/">https://sourceforge.net/projects/stxxl/</a></li>
</ul>
</li>
<li>For scientific work: Cite the papers mentioned here: <a href="http://stxxl.sourceforge.net/">http://stxxl.sourceforge.net/</a></li>
<li>For industrial users: Tell us the name of your company, so we can use it as a reference.</li>
</ul>
<h1><a class="anchor" id="faq_nonPODs"></a>
References to Elements in External Memory Data Structures</h1>
<p>You should not pass or store references to elements in an external memory data structure. When the reference is used, the block that contains the element may be no longer in internal memory.<br/>
 Use/pass an iterator (reference) instead.<br/>
 For an <code><a class="el" href="classstxxl_1_1vector.html" title="External vector container.  Introduction to vector container: see STXXL Vector tutorial.  Design and Internals of vector container: see Vector. ">stxxl::vector</a></code> with <code>n</code> pages and LRU replacement strategy, it can be guaranteed that the last <code>n</code> references obtained using <code>stxxl::vector::operator</code>[] or dereferencing an iterator are valid.</p>
<p>However, if <code>n</code> is 1, even a single innocent-looking line like </p>
<pre class="fragment">std::cout &lt;&lt; v[0] &lt;&lt; " " &lt;&lt; v[1000000] &lt;&lt; std::endl;
</pre><p> can lead to inconsistent results.</p>
<h1><a class="anchor" id="faq_templateparam"></a>
Parameterizing STXXL Containers</h1>
<p>STXXL container types like <a class="el" href="classstxxl_1_1vector.html" title="External vector container.  Introduction to vector container: see STXXL Vector tutorial.  Design and Internals of vector container: see Vector. ">stxxl::vector</a> can be parameterized only with a value type that is a <a href="http://en.wikipedia.org/wiki/Plain_old_data_structures">POD</a> (i. e. no virtual functions, no user-defined copy assignment/destructor, etc.) and does not contain references (including pointers) to internal memory. Usually, "complex" data types do not satisfy this requirements.</p>
<p>This is why <a class="el" href="classstxxl_1_1vector.html" title="External vector container.  Introduction to vector container: see STXXL Vector tutorial.  Design and Internals of vector container: see Vector. ">stxxl::vector</a>&lt;std::vector&lt;T&gt; &gt; and <a class="el" href="classstxxl_1_1vector.html" title="External vector container.  Introduction to vector container: see STXXL Vector tutorial.  Design and Internals of vector container: see Vector. ">stxxl::vector</a>&lt;stxxl::vector&lt;T&gt; &gt; are invalid. If appropriate, use std::vector&lt;stxxl::vector&lt;T&gt; &gt;, or emulate a two-dimensional array by doing index calculation.</p>
<h1><a class="anchor" id="faq_threadsafe"></a>
Thread-Safety</h1>
<p>The I/O and block management layers are thread-safe (since release 1.1.1). The user layer data structures are not thread-safe.<br/>
 I.e. you may access <b>different</b> <code>STXXL</code> data structures from concurrent threads without problems, but you should not share a data structure between threads (without implementing proper locking yourself).<br/>
 This is a design choice, having the data structures thread-safe would mean a significant performance loss.</p>
<h1><a class="anchor" id="faq_diskalloc"></a>
Disk Allocation on Multiple Disks</h1>
<p>Q: I have configured several disks to use with STXXL. Why does STXXL fail complaining about the <b>lack of space</b>? According to my calclulations, the space on the disks should be sufficient.</p>
<p>A: This may happen if the disks have <b>different size</b>. With the default parameters <code>STXXL</code> containers use randomized block-to-disk allocation strategies that distribute data evenly between the disks but ignore the availability of free space on them. Thus when the smallest disk is full, the program will abort because it cannot grow the file on that disk.</p>
<p>A2: This round-robin disk allocation is due to the history of STXXL's support for parallel disk algorithms. It would be great if someone would contribute a patch for this issue. This would require adapting <a class="el" href="classstxxl_1_1disk__allocator.html">stxxl::disk_allocator</a> and <a class="el" href="classstxxl_1_1block__manager.html" title="Block manager class. ">stxxl::block_manager</a> to skip full disks when allocating new blocks.</p>
<h1><a class="anchor" id="faq_msclr"></a>
STXXL in a Microsoft CLR Library</h1>
<p>From STXXL user Christian, posted in the <a href="https://sourceforge.net/projects/stxxl/forums/forum/446474/topic/3407329">forum</a>:</p>
<p>Precondition: I use STXXL in a Microsoft CLR Library (a special DLL). That means that managed code and native code (e.g. STXXL) have to co-exist in your library.</p>
<p>Symptom: Application crashes at process exit, when the DLL is unloaded.</p>
<p>Cause: STXXL's singleton classes use the <code>atexit()</code> function to destruct themselves at process exit. The exit handling will cause the process to crash at exit (still unclear if it's a bug or a feature of the MS runtime).</p>
<p>Solution:</p>
<p>1.) Compiled STXXL static library with <code>STXXL_NON_DEFAULT_EXIT_HANDLER</code> defined.</p>
<p>2.) For cleanup, <code><a class="el" href="namespacestxxl.html#a04748095530bca4b156253fe134de467">stxxl::run_exit_handlers()</a></code> has now to be called manually. To get this done automatically:</p>
<p>Defined a CLI singleton class "Controller":</p>
<pre class="fragment">public ref class Controller {
private: 
    static Controller^ instance = gcnew Controller;
    Controller();
};
</pre><p>Registered my own cleanup function in Controller's constructor which will manage to call <code><a class="el" href="namespacestxxl.html#a04748095530bca4b156253fe134de467">stxxl::run_exit_handlers()</a></code>:</p>
<pre class="fragment">#pragma managed(push, off)
static int myexitfn()
{
    stxxl::run_exit_handlers();
    return 0;
}
#pragma managed(pop)

Controller::Controller()
{
    onexit(myexitfn);
}
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Welcome to STXXL</a></li>
    <li class="footer"><a href="http://stxxl.sourceforge.net">STXXL 1.4.1</a> - Generated on Wed Oct 29 2014 10:13:28 for STXXL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
