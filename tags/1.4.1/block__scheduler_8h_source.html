<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>STXXL: include/stxxl/bits/mng/block_scheduler.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">STXXL
   &#160;<span id="projectnumber">1.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('block__scheduler_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">block_scheduler.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="block__scheduler_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  include/stxxl/bits/mng/block_scheduler.h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Part of the STXXL. See http://stxxl.sourceforge.net</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  Copyright (C) 2010-2011 Raoul Steffen &lt;R-Steffen@gmx.de&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *  Distributed under the Boost Software License, Version 1.0.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *  (See accompanying file LICENSE_1_0.txt or copy at</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *  http://www.boost.org/LICENSE_1_0.txt)</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#ifndef STXXL_MNG_BLOCK_SCHEDULER_HEADER</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define STXXL_MNG_BLOCK_SCHEDULER_HEADER</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stack.html">stack</a>&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="queue.html">queue</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="block__manager_8h.html">stxxl/bits/mng/block_manager.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="typed__block_8h.html">stxxl/bits/mng/typed_block.h</a>&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="addressable__queues_8h.html">stxxl/bits/common/addressable_queues.h</a>&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="namespace_8h.html#a3a0db882bf107866ded135ce72af6a5f">STXXL_BEGIN_NAMESPACE</a></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//! Virtualization of a block of data.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//! Holds information for allocating and swapping. To use in cooperation with block_scheduler.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//!</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//! A swappable_block can be uninitialized, i.e. it holds no data.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//! When access is required, is has to be acquired first, and released afterwards, so it can be swapped in and out as required.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//! If the stored data is no longer needed, it can get uninitialized, freeing both internal and external memory.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//! \tparam ValueType type of contained objects (POD with no references to internal memory).</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//! \tparam BlockSize Number of objects in one block.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//!         BlockSize*sizeof(ValueType) must be divisible by 4096.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keywordtype">unsigned</span> BlockSize&gt;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html">   36</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1swappable__block.html">swappable_block</a></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a729a4ebb358e49f57a76cfd81829f47e">   39</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a> raw_block_size = BlockSize * <span class="keyword">sizeof</span>(ValueType);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ab860575cde314de079efa3ff62c5e057">   42</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1typed__block.html">typed_block&lt;raw_block_size, ValueType&gt;</a> <a class="code" href="classstxxl_1_1swappable__block.html#ab860575cde314de079efa3ff62c5e057">internal_block_type</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a24874fce2f6b3e840f8d372ca6b196ef">   43</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structstxxl_1_1BID.html">internal_block_type::bid_type</a> <a class="code" href="classstxxl_1_1swappable__block.html#a24874fce2f6b3e840f8d372ca6b196ef">external_block_type</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a373b104eee2e285bdc70ff4af8aaca62">   46</a></span>&#160;    <a class="code" href="structstxxl_1_1BID.html">external_block_type</a> <a class="code" href="classstxxl_1_1swappable__block.html#a373b104eee2e285bdc70ff4af8aaca62">external_data</a>;      <span class="comment">//!external_data.valid if no associated space on disk</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a9cded2f42281427567bf1c9b4d5edfd2">   47</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a>* <a class="code" href="classstxxl_1_1swappable__block.html#a9cded2f42281427567bf1c9b4d5edfd2">internal_data</a>;     <span class="comment">//NULL if there is no internal memory reserved</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a02622af166af4b0de17a6a7f0dc039d1">   48</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#a02622af166af4b0de17a6a7f0dc039d1">dirty</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a8fe149e5b20ca6e81f1d9a4cd921a699">   49</a></span>&#160;    <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> <a class="code" href="classstxxl_1_1swappable__block.html#a8fe149e5b20ca6e81f1d9a4cd921a699">reference_count</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a79357521ac451edf13f492c1b584bf38">   51</a></span>&#160;    <span class="keyword">static</span> <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a> <a class="code" href="classstxxl_1_1swappable__block.html#a79357521ac451edf13f492c1b584bf38">disk_allocation_offset</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a2ec11b9ea6afd232145ff380fa26215b">   53</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#a2ec11b9ea6afd232145ff380fa26215b">get_external_block</a>()</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    { block_manager::get_instance()-&gt;new_block(<a class="code" href="structstxxl_1_1striping.html">striping</a>(), external_data, ++disk_allocation_offset); }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#af48fadc3a80fdc3fa4ecf9fb0131687c">   56</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#af48fadc3a80fdc3fa4ecf9fb0131687c">free_external_block</a>()</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        block_manager::get_instance()-&gt;delete_block(external_data);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        external_data = <a class="code" href="structstxxl_1_1BID.html">external_block_type</a>(); <span class="comment">// make invalid</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    //! Create in uninitialized state.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#aa1812d2f6fa54b407bf5b771b66070b5">   64</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1swappable__block.html#aa1812d2f6fa54b407bf5b771b66070b5">swappable_block</a>()</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        : external_data() <span class="comment">/*!valid*/</span>, internal_data(0), dirty(false), reference_count(0) { }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a6dd9c1d0dc54c654d69d46c861e54d65">   67</a></span>&#160;    <a class="code" href="classstxxl_1_1swappable__block.html#a6dd9c1d0dc54c654d69d46c861e54d65">~swappable_block</a>() { }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">    //! If it has an internal_block. The internal_block implicitly holds valid data.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#abc89df6c9303c361b61ed9c834e12990">   70</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#abc89df6c9303c361b61ed9c834e12990">is_internal</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> (internal_data != NULL); }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">    //! If the external_block does not hold valid data.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ad3e3acdfc3410f9dec8a000008e17a8a">   74</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#ad3e3acdfc3410f9dec8a000008e17a8a">is_dirty</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> dirty; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">    //! If it has an external_block.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#aaa52d0f74a6fd44024e1009303bb1fb7">   78</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#aaa52d0f74a6fd44024e1009303bb1fb7">has_external_block</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> external_data.valid(); }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">    //! If it has an external_block that holds valid data.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a460fd740b98d884a800d0105434da982">   82</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#a460fd740b98d884a800d0105434da982">is_external</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> has_external_block() &amp;&amp; ! is_dirty(); }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    //! If it is acquired.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a17536c2736c800c74aa76454272f77ad">   86</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#a17536c2736c800c74aa76454272f77ad">is_acquired</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> reference_count &gt; 0; }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">    //! If it holds an internal_block but does not need it.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a4a64229a9636b30ead15d59d4965db09">   90</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#a4a64229a9636b30ead15d59d4965db09">is_evictable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> ! is_acquired() &amp;&amp; is_internal(); }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    //! If it has some valid data (in- or external).</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ab6bbb4e1ef54d3bf36dea3e7d2ff2894">   94</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#ab6bbb4e1ef54d3bf36dea3e7d2ff2894">is_initialized</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> is_internal() || is_external(); }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    //! Invalidate external data if true.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    //! \return is_dirty()</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a62db447e39ef062712daa7f3061d20fd">   99</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1swappable__block.html#a62db447e39ef062712daa7f3061d20fd">make_dirty_if</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> make_dirty)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        assert(is_acquired());</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> dirty = make_dirty || dirty;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">    //! Acquire the block, i.e. add a reference. Has to be internal.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">    //! \return A reference to the data-block.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a8857ae641dbe14bbb6ff671353805c99">  107</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1swappable__block.html#a8857ae641dbe14bbb6ff671353805c99">acquire</a>()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        assert(is_internal());</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        ++reference_count;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> *internal_data;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    //! Release the block, i.e. subduct a reference. Has to be acquired.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a9288166547ca91778d42d66ce8d69da4">  115</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#a9288166547ca91778d42d66ce8d69da4">release</a>()</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        assert(is_acquired());</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        --reference_count;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    //! Get a reference to the data-block. Has to be acquired.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a28c3c1f91025f102772c30d15e1e856d">  122</a></span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1swappable__block.html#a28c3c1f91025f102772c30d15e1e856d">get_internal_block</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        assert(is_acquired());</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> *internal_data;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">    //! Get a reference to the data-block. Has to be acquired.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a0d7f69f73a444b3439df0b51b30925e0">  129</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1swappable__block.html#a0d7f69f73a444b3439df0b51b30925e0">get_internal_block</a>()</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        assert(is_acquired());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> *internal_data;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    //! Fill block with default data, is supposed to be overwritten by subclass. Has to be internal.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a329981f27351bba02ed5190405efc664">  136</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#a329981f27351bba02ed5190405efc664">fill_default</a>() { }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">    //! Read asyncronusly from external_block to internal_block. Has to be internal and have an external_block.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">    //! \return A request pointer to the I/O.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#aa6fe3fe393b4c29705588f758054c0cb">  140</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> <a class="code" href="classstxxl_1_1swappable__block.html#aa6fe3fe393b4c29705588f758054c0cb">read_async</a>(<a class="code" href="classstxxl_1_1completion__handler.html">completion_handler</a> on_cmpl = <a class="code" href="classstxxl_1_1completion__handler.html">completion_handler</a>())</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        assert(is_internal());</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        assert(has_external_block());</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">        #ifdef RW_VERBOSE</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor"></span>        <a class="code" href="verbose_8h.html#afec876b95f7d6cc4b0f0bd4c0d7d89a0">STXXL_MSG</a>(<span class="stringliteral">&quot;reading block&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor"></span>        dirty = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">return</span> internal_data-&gt;read(external_data, on_cmpl);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">    //! Read synchronously from external_block to internal_block. Has to be internal and have an external_block.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a4cf4132c1d683e24e18f68494926598f">  152</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#a4cf4132c1d683e24e18f68494926598f">read_sync</a>()</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    { read_async()-&gt;wait(); }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">    //! Write asyncronusly from internal_block to external_block if necessary.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">    //! \return A request pointer to the I/O, an invalid request pointer if not necessary.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a2cf16844fc3781fac803acfa0db35b45">  157</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> <a class="code" href="classstxxl_1_1swappable__block.html#a2cf16844fc3781fac803acfa0db35b45">clean_async</a>(<a class="code" href="classstxxl_1_1completion__handler.html">completion_handler</a> on_cmpl = <a class="code" href="classstxxl_1_1completion__handler.html">completion_handler</a>())</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (! is_dirty())</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__reqlayer.html#ga7f6ac626252081b4d28528770f32a19e">request_ptr</a>();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (! has_external_block())</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            get_external_block();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">        #ifdef RW_VERBOSE</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor"></span>        <a class="code" href="verbose_8h.html#afec876b95f7d6cc4b0f0bd4c0d7d89a0">STXXL_MSG</a>(<span class="stringliteral">&quot;writing block&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor"></span>        dirty = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span> internal_data-&gt;write(external_data, on_cmpl);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    //! Write synchronously from internal_block to external_block if necessary.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ab80d8412231f82ca654baf00a3bc8b8d">  171</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#ab80d8412231f82ca654baf00a3bc8b8d">clean_sync</a>()</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> rp = clean_async();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (rp.<a class="code" href="classstxxl_1_1counting__ptr.html#ae98580df566429cf4ba322a0f8ef20c7">valid</a>())</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            rp-&gt;<a class="code" href="classstxxl_1_1request__interface.html#ac740c3dd58d02842bed4a4e86fe42b22">wait</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">    //! Attach an internal_block, making the block internal. Has to be not internal.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ad2b434ef1b94bfcd09351c773edb1214">  179</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#ad2b434ef1b94bfcd09351c773edb1214">attach_internal_block</a>(<a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        assert(! is_internal());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        internal_data = iblock;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    //! Detach the internal_block. Writes to external_block if necessary. Has to be evictable.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">    //! \return A pointer to the internal_block.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#aee12f86d2a578fd57dd8dcc2ac63ce76">  187</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a> * <a class="code" href="classstxxl_1_1swappable__block.html#aee12f86d2a578fd57dd8dcc2ac63ce76">detach_internal_block</a>()</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        assert(is_evictable());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        clean_sync();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a>* iblock = internal_data;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        internal_data = 0;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> iblock;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">    //! Bring the block in uninitialized state, freeing external and internal memory.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    //! Returns a pointer to the internal_block, NULL if it had none.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    //! \return A pointer to the freed internal_block, NULL if it had none.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#a872bfc0e183fea986915afa967107adc">  199</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a> * <a class="code" href="classstxxl_1_1swappable__block.html#a872bfc0e183fea986915afa967107adc">deinitialize</a>()</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        assert(! is_acquired());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        dirty = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// free external_block (so that it becomes invalid and the disk-space can be used again)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (has_external_block())</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            free_external_block();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// free internal_block</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="classstxxl_1_1typed__block.html">internal_block_type</a>* iblock = internal_data;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        internal_data = 0;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> iblock;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">    //! Set the external_block that holds the swappable_block&#39;s data. The block gets initialized with it.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">    //! \param eblock The external_block holding initial data.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#aff36a529415f519022fed79e8d509415">  214</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1swappable__block.html#aff36a529415f519022fed79e8d509415">initialize</a>(<a class="code" href="structstxxl_1_1BID.html">external_block_type</a> eblock)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        assert(! is_initialized());</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        external_data = eblock;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">    //! Extract the swappable_blocks data in an external_block. The block gets uninitialized.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">    //! \return The external_block that holds the swappable_block&#39;s data.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="classstxxl_1_1swappable__block.html#ac9fd66839e267bc0b0234f7e62c146b2">  222</a></span>&#160;<span class="comment"></span>    <a class="code" href="structstxxl_1_1BID.html">external_block_type</a> <a class="code" href="classstxxl_1_1swappable__block.html#ac9fd66839e267bc0b0234f7e62c146b2">extract_external_block</a>()</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        assert(! is_internal());</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="structstxxl_1_1BID.html">external_block_type</a> eblock = external_data;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        external_data = <a class="code" href="structstxxl_1_1BID.html">external_block_type</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> eblock;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;};</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> ValueType, <span class="keywordtype">unsigned</span> BlockSize&gt;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a> swappable_block&lt;ValueType, BlockSize&gt;::disk_allocation_offset = 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html">  235</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">  238</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">block_scheduler_algorithm_online_lru</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">//! Schedules swapping of blocks and provides blocks for temporary storage.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">//!</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">//! In simple mode, it tries to save I/Os through caching only.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//! In simulation mode, it records access patterns into a prediction sequence.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//! The prediction sequence can then be used for prefetching in the (offline) execute mode.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//! This will only work for algorithms with deterministic, data oblivious access patterns.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//! In simulation mode, no I/O is performed; the data provided is accessible but undefined.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//! In execute mode, it does caching, prefetching, and possibly other optimizations.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">//! \tparam SwappableBlockType Type of swappable_blocks to manage. Can be some specialized subclass.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html">  250</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler</a> : <span class="keyword">private</span> <a class="code" href="classstxxl_1_1noncopyable.html">noncopyable</a></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// tuning-parameter: To acquire blocks, internal memory has to be allocated.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// This constant limits the number of internal_blocks allocated at once.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a2f7628d155e8a8188a7e11bff3e7bdde">  255</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a2f7628d155e8a8188a7e11bff3e7bdde">max_internal_blocks_alloc_at_once</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a354693aa80756064868f8d3e0b85c40e">  257</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a354693aa80756064868f8d3e0b85c40e">time_type</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">  260</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> SwappableBlockType::internal_block_type <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">  261</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> SwappableBlockType::external_block_type <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">external_block_type</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">  262</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;SwappableBlockType&gt;::size_type <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">/*/! Mode the block scheduler currently works in</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    enum mode</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">        online,         //serve requests immediately, without any prediction, LRU caching</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">        simulation,     //record prediction sequence only, do not serve requests, (returned blocks must not be accessed)</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">        offline_lfd,    //serve requests based on prediction sequence, using longest-forward-distance caching</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">        offline_lfd_prefetch     //serve requests based on prediction sequence, using longest-forward-distance caching, and prefetching</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">    };*/</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// -------- prediction_sequence -------</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">  275</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">block_scheduler_operation</a></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a29ae9b5557ad6310a40d0e203ea4e36f">  277</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a29ae9b5557ad6310a40d0e203ea4e36f">op_acquire</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a18acebfafdb17509d2c8917dd73abdfa">  278</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a18acebfafdb17509d2c8917dd73abdfa">op_acquire_uninitialized</a>,</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a201a77b2f6ccf48a0967a6e423eaed78">  279</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a201a77b2f6ccf48a0967a6e423eaed78">op_release</a>,</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ab7ec0872e5cd3eb0455a3a73a2d4ba23">  280</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ab7ec0872e5cd3eb0455a3a73a2d4ba23">op_release_dirty</a>,</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664af88a959b3e48f11f1657fbd36e0d9e0c">  281</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664af88a959b3e48f11f1657fbd36e0d9e0c">op_deinitialize</a>,</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ad697af9600f8b027fbeed11d312f8683">  282</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ad697af9600f8b027fbeed11d312f8683">op_initialize</a>,</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a2ec149884a94faae8835457d7fea7a4d">  283</a></span>&#160;        op_extract_external_block</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    };</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">  286</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element</a></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    {</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#a4168c87ed890d1499c9eaec6bc6d874c">  288</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">block_scheduler_operation</a> <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#a4168c87ed890d1499c9eaec6bc6d874c">op</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ab3b4181105fd8918f0bcd5ba84bbc2e1">  289</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ab3b4181105fd8918f0bcd5ba84bbc2e1">id</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ad38f52b20832924d6c0c40d4a11b5a5f">  290</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a354693aa80756064868f8d3e0b85c40e">time_type</a> <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ad38f52b20832924d6c0c40d4a11b5a5f">time</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#aa27a2c8f8894465bccc4d8ec9ac56638">  292</a></span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#aa27a2c8f8894465bccc4d8ec9ac56638">prediction_sequence_element</a>(<a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">block_scheduler_operation</a> op,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                    <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> <span class="keywordtype">id</span>, <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> time)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            : op(op), id(id), time(time) { }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    };</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">  297</a></span>&#160;    <span class="keyword">typedef</span> std::list&lt;prediction_sequence_element&gt; <a class="code" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">prediction_sequence_type</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// ---- end prediction_sequence -------</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">class</span> SBT&gt;</div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a2e308cce332ea6cd61f2e54f1e7d86af">  302</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a85ebfd32bf189da3e5d016cd7f455dc7">  304</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a85ebfd32bf189da3e5d016cd7f455dc7">max_internal_blocks</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a1bd6b8c9648e7ff801a69d9fb65cbb71">  305</a></span>&#160;    <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a1bd6b8c9648e7ff801a69d9fb65cbb71">remaining_internal_blocks</a>;<span class="comment"></span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">    //! Stores pointers to arrays of internal_blocks. Used to deallocate them only.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#aebd66f09b9a364eb65434f5d659e8194">  307</a></span>&#160;<span class="comment"></span>    std::stack&lt;internal_block_type*&gt; <a class="code" href="classstxxl_1_1block__scheduler.html#aebd66f09b9a364eb65434f5d659e8194">internal_blocks_blocks</a>;<span class="comment"></span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">    //! holds free internal_blocks with attributes reset.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#ac02adcabf478f5b923a23fd5fa1528b2">  309</a></span>&#160;<span class="comment"></span>    std::stack&lt;internal_block_type*&gt; <a class="code" href="classstxxl_1_1block__scheduler.html#ac02adcabf478f5b923a23fd5fa1528b2">free_internal_blocks</a>;<span class="comment"></span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">    //! temporary blocks that will not be needed after algorithm termination.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#aef43e00f948535cd4f16c3a54e199fae">  311</a></span>&#160;<span class="comment"></span>    <span class="keyword">mutable</span> std::vector&lt;SwappableBlockType&gt; <a class="code" href="classstxxl_1_1block__scheduler.html#aef43e00f948535cd4f16c3a54e199fae">swappable_blocks</a>;<span class="comment"></span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">    //! holds indices of free swappable_blocks with attributes reset.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span>    std::priority_queue&lt;swappable_block_identifier_type, std::vector&lt;swappable_block_identifier_type&gt;,</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a97b8770056b82dd74e229274f98dac6d">  314</a></span>&#160;                        std::greater&lt;swappable_block_identifier_type&gt; &gt; <a class="code" href="classstxxl_1_1block__scheduler.html#a97b8770056b82dd74e229274f98dac6d">free_swappable_blocks</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a717d73d136e3f0750da1942cdbe97f5b">  315</a></span>&#160;    <a class="code" href="classstxxl_1_1block__manager.html">block_manager</a>* <a class="code" href="classstxxl_1_1block__scheduler.html#a717d73d136e3f0750da1942cdbe97f5b">bm</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a8beaa8bbf84339718bc1c9218246e9bf">  316</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a>* <a class="code" href="classstxxl_1_1block__scheduler.html#a8beaa8bbf84339718bc1c9218246e9bf">algo</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">    //! Get an internal_block from the freelist or a newly allocated one if available.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">    //! \return Pointer to the internal_block. NULL if none available.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a65e2a45dfa2cc529bd09f165dd849c24">  320</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a> * <a class="code" href="classstxxl_1_1block__scheduler.html#a65e2a45dfa2cc529bd09f165dd849c24">get_free_internal_block</a>()</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (! free_internal_blocks.empty())</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="comment">// =&gt; there are internal_blocks in the free-list</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>* iblock = free_internal_blocks.top();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            free_internal_blocks.pop();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">return</span> iblock;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remaining_internal_blocks &gt; 0)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="comment">// =&gt; more internal_blocks can be allocated</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> num_blocks = <a class="code" href="uint__types_8h.html#a969c1286bbe8eeb8811dac7a462d4a78">std::min</a>(max_internal_blocks_alloc_at_once, remaining_internal_blocks);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            remaining_internal_blocks -= num_blocks;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>* iblocks = <span class="keyword">new</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>[num_blocks];</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            internal_blocks_blocks.push(iblocks);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> i = num_blocks - 1; i &gt; 0; --i)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                free_internal_blocks.push(iblocks + i);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">return</span> iblocks;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="comment">// =&gt; no internal_block available</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">    //! Return an internal_block to the freelist.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#afb7cb6f814b6fc18a370a2dd86ff7ea9">  348</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#afb7cb6f814b6fc18a370a2dd86ff7ea9">return_free_internal_block</a>(<a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    { free_internal_blocks.push(iblock); }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">    //! Create a block_scheduler with empty prediction sequence in simple mode.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">    //! \param max_internal_memory Amount of internal memory (in bytes) the scheduler is allowed to use for acquiring, prefetching and caching.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a6814e7bbadf740386d3df8df3b2d6719">  354</a></span>&#160;<span class="comment"></span>    <span class="keyword">explicit</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a6814e7bbadf740386d3df8df3b2d6719">block_scheduler</a>(<span class="keyword">const</span> <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> max_internal_memory)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        : max_internal_blocks(<a class="code" href="namespacestxxl.html#a13269a96a32504fec831ef023fdac7b6">div_ceil</a>(max_internal_memory, sizeof(<a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a>))),</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          remaining_internal_blocks(max_internal_blocks),</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          bm(<a class="code" href="classstxxl_1_1block__manager.html">block_manager</a>::get_instance()),</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          algo(0)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        algo = <span class="keyword">new</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">block_scheduler_algorithm_online_lru&lt;SwappableBlockType&gt;</a>(*this);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#abfdac0d00d3257776eaba98e81023707">  363</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler.html#abfdac0d00d3257776eaba98e81023707">~block_scheduler</a>()</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keyword">delete</span> algo;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> num_freed_internal_blocks = 0;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (free_swappable_blocks.size() != swappable_blocks.size())</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="comment">// =&gt; not all swappable_blocks are free, at least deinitialize them</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;not all swappable_blocks are free, those not acquired will be deinitialized&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="comment">// evictable_blocks would suffice</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::vector&lt;SwappableBlockType&gt;::iterator it = swappable_blocks.begin();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                 it != swappable_blocks.end(); ++it)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keywordflow">if</span> (! it-&gt;is_acquired() &amp;&amp; it-&gt;deinitialize())</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    <span class="comment">// count internal_blocks that get freed</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    num_freed_internal_blocks++;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> nlost = (max_internal_blocks - remaining_internal_blocks)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                             - (free_internal_blocks.size() + num_freed_internal_blocks)) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(nlost &lt;&lt; <span class="stringliteral">&quot; internal_blocks are lost. They will get deallocated.&quot;</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">while</span> (! internal_blocks_blocks.empty())</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keyword">delete</span>[] internal_blocks_blocks.top();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            internal_blocks_blocks.pop();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">    //! Acquire the given block.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">    //! Has to be in pairs with release. Pairs may be nested and interleaved.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    //! \return Reference to the block&#39;s data.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">    //! param sbid Swappable block to acquire.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a18207a3b273714d69d260056996f85ae">  395</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler.html#a18207a3b273714d69d260056996f85ae">acquire</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    { <span class="keywordflow">return</span> algo-&gt;acquire(sbid, uninitialized); }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">    //! Release the given block.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">    //! Has to be in pairs with acquire. Pairs may be nested and interleaved.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">    //! \param sbid Swappable block to release.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">    //! \param dirty If the data has been changed, invalidating possible data in external storage.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#af15cd4274e5e8e00fe7a164bf861c50c">  402</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af15cd4274e5e8e00fe7a164bf861c50c">release</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    { algo-&gt;release(sbid, dirty); }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">    //! Drop all data in the given block, freeing in- and external memory.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#ab0dc5bdef851f303c2f78b2996f5f16a">  406</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#ab0dc5bdef851f303c2f78b2996f5f16a">deinitialize</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    { algo-&gt;deinitialize(sbid); }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">    //! Initialize the swappable_block with the given external_block.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">    //! It will use the the external_block for swapping and take care about</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">    //! it&#39;s deallocation. Has to be uninitialized.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">    //! \param sbid identifier to the swappable_block</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">    //! \param eblock external_block a.k.a. bid</span></div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#abf6a714d3287e3a7443292b7546112d2">  415</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#abf6a714d3287e3a7443292b7546112d2">initialize</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid, <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">external_block_type</a> eblock)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    { algo-&gt;initialize(sbid, eblock); }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">    //! Deinitialize the swappable_block and return it&#39;s contents in an external_block.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">    //! \param sbid identifier to the swappable_block</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">    //! \return external_block a.k.a. bid</span></div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a3490b18520b7f4df24b4f3637d26d23c">  422</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a3490b18520b7f4df24b4f3637d26d23c">extract_external_block</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    { <span class="keywordflow">return</span> algo-&gt;extract_external_block(sbid); }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">    //! check if the swappable_block is initialized.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">    //! \param sbid identifier to the swappable_block</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">    //! \return if the swappable_block is initialized</span></div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a0f06a033d47d9762f88e736d8ae4a3b0">  428</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a0f06a033d47d9762f88e736d8ae4a3b0">is_initialized</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid)<span class="keyword"> const</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> algo-&gt;is_initialized(sbid); }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">    //! Record a timestep in the prediction sequence to seperate consecutive</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    //! acquire rsp. release-operations. Has an effect only in simulation mode.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a2c5049ccc0860cb3438236362e1b7ff5">  433</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a2c5049ccc0860cb3438236362e1b7ff5">explicit_timestep</a>()</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    { algo-&gt;explicit_timestep(); }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">    //! Get a const reference to given block&#39;s data. Block has to be already acquired.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">    //! \param sbid Swappable block to access.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a0d8f32715698e5b6ad7c54e5f2942c38">  438</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler.html#a0d8f32715698e5b6ad7c54e5f2942c38">get_internal_block</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid)<span class="keyword"> const</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> swappable_blocks[sbid].get_internal_block(); }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">    //! Allocate an uninitialized swappable_block.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">    //! \return An identifier of the block.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a5c397590ea370480cc01445880da92a2">  443</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler.html#a5c397590ea370480cc01445880da92a2">allocate_swappable_block</a>()</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> (free_swappable_blocks.empty())</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="comment">// create new swappable_block</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            sbid = swappable_blocks.size();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            swappable_blocks.resize(sbid + 1);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            algo-&gt;swappable_blocks_resize(sbid + 1);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="comment">// take swappable_block from freelist</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            sbid = free_swappable_blocks.top();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            free_swappable_blocks.pop();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> sbid;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">    //! Free given no longer used temporary swappable_block.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">    //! \param sbid Temporary swappable_block to free.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a4704994e6a55bddab50f2b7b36f31c58">  464</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a4704994e6a55bddab50f2b7b36f31c58">free_swappable_block</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        deinitialize(sbid);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        free_swappable_blocks.push(sbid);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">    //! Returns if simulation mode is on, i.e. if a prediction sequence is being recorded.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">    //! \return If simulation mode is on.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a79cdf18e51ac05233722db67a31b369b">  472</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a79cdf18e51ac05233722db67a31b369b">is_simulating</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> algo-&gt;is_simulating(); }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">    //! Switch the used algorithm, e.g. to simulation etc..</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">    //! \param new_algo Pointer to the new algorithm object. Has to be instantiated to the block scheduler (or the old algorithm object).</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">    //! \return Pointer to the old algorithm object.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a023226bf5952e8e3c45572e6b9a05899">  478</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> * <a class="code" href="classstxxl_1_1block__scheduler.html#a023226bf5952e8e3c45572e6b9a05899">switch_algorithm_to</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a>* new_algo)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        assert(&amp;new_algo-&gt;<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#af309feba9c42e185ad1fc9e196fdd055">bs</a> == <span class="keyword">this</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a>* old_algo = algo;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        algo = new_algo;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">return</span> old_algo;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">    //! Return the current algorithm.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a6d577e3b34b1094794732deb5fa689c8">  487</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> * <a class="code" href="classstxxl_1_1block__scheduler.html#a6d577e3b34b1094794732deb5fa689c8">get_current_algorithm</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">return</span> algo;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">    //! Get the prediction_sequence.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">    //! \return reference to the prediction_sequence</span></div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#ac6b2aa56f946e72d5010ea4b96932698">  494</a></span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">prediction_sequence_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler.html#ac6b2aa56f946e72d5010ea4b96932698">get_prediction_sequence</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> algo-&gt;get_prediction_sequence(); }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler.html#a098d5c3d955ab11113a02002d9071029">  497</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a098d5c3d955ab11113a02002d9071029">flush</a>()</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        std::vector&lt;request_ptr&gt; requests;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">while</span> (! algo-&gt;evictable_blocks_empty())</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">swappable_block_identifier_type</a> sbid = algo-&gt;evictable_blocks_pop();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> rq = swappable_blocks[sbid].clean_async();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">if</span> (rq.<a class="code" href="classstxxl_1_1counting__ptr.html#ae98580df566429cf4ba322a0f8ef20c7">valid</a>())</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                requests.push_back(rq);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            return_free_internal_block(swappable_blocks[sbid].detach_internal_block());</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::vector&lt;request_ptr&gt;::reverse_iterator it = requests.rbegin();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;             it != requests.rend(); ++it)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            (*it)-&gt;wait();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;};</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="keyword">const</span> <a class="code" href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">int_type</a> block_scheduler&lt;SwappableBlockType&gt;::max_internal_blocks_alloc_at_once = 128;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">//! Interface of a block scheduling algorithm.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="keyword">class </span>block_scheduler_algorithm : <span class="keyword">private</span> noncopyable</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a7aa480658d54469bd49a8bba3fd80b87">  524</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a7aa480658d54469bd49a8bba3fd80b87">block_scheduler_type</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">  525</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">block_scheduler_type::internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">  526</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">block_scheduler_type::external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a240fb311c2073cc91a2061f259528644">  527</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">block_scheduler_type::swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a240fb311c2073cc91a2061f259528644">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">  528</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">block_scheduler_type::prediction_sequence_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">prediction_sequence_type</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">  529</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a354693aa80756064868f8d3e0b85c40e">block_scheduler_type::time_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">time_type</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#af309feba9c42e185ad1fc9e196fdd055">  532</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#af309feba9c42e185ad1fc9e196fdd055">bs</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#af1e0b0b475976718f9df5c978fd831a1">  535</a></span>&#160;    std::vector&lt;SwappableBlockType&gt;&amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#af1e0b0b475976718f9df5c978fd831a1">swappable_blocks</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a085807eedd6cd7d6092b7731b395ae9f">  536</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">prediction_sequence_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a085807eedd6cd7d6092b7731b395ae9f">prediction_sequence</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a3efd0ff39461bc6115c7d95a2bc56219">  538</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3efd0ff39461bc6115c7d95a2bc56219">get_algorithm_from_block_scheduler</a>()</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    { <span class="keywordflow">return</span> bs.algo; }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">    //! Get an internal_block from the block_scheduler.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">    //! \return Pointer to the internal_block. NULL if none available.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a5e8d47d9b7ede49e71c603ebc53c34c0">  543</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a5e8d47d9b7ede49e71c603ebc53c34c0">get_free_internal_block_from_block_scheduler</a>()</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    { <span class="keywordflow">return</span> bs.get_free_internal_block(); }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    //! Return an internal_block to the block_scheduler.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#aba6fcf8ac2d74213701c135696cfe103">  547</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#aba6fcf8ac2d74213701c135696cfe103">return_free_internal_block_to_block_scheduler</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    { bs.return_free_internal_block(iblock); }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a9010803037a344ef3705a22e3723cc01">  551</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a9010803037a344ef3705a22e3723cc01">block_scheduler_algorithm</a>(<a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; bs)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        : bs(bs),</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;          swappable_blocks(bs.swappable_blocks)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    { }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a3511b35486b0679b0957e5a4c6a824f3">  556</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3511b35486b0679b0957e5a4c6a824f3">block_scheduler_algorithm</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>* old)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        : bs(old-&gt;bs),</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          swappable_blocks(bs.swappable_blocks)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    { }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a73a060aaceb3857fa9a02cd5e712b650">  561</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a73a060aaceb3857fa9a02cd5e712b650">~block_scheduler_algorithm</a>() { }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> evictable_blocks_empty() = 0;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keyword">virtual</span> swappable_block_identifier_type evictable_blocks_pop() = 0;</div>
<div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a689782ee68f2ef9584bc81f4dadd670a">  565</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a689782ee68f2ef9584bc81f4dadd670a">swappable_blocks_resize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a240fb311c2073cc91a2061f259528644">swappable_block_identifier_type</a> <span class="comment">/*size*/</span>) { }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keyword">virtual</span> internal_block_type &amp; acquire(<span class="keyword">const</span> swappable_block_identifier_type sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>) = 0;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> release(swappable_block_identifier_type sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty) = 0;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> deinitialize(swappable_block_identifier_type sbid) = 0;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> initialize(swappable_block_identifier_type sbid, external_block_type eblock) = 0;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keyword">virtual</span> external_block_type extract_external_block(swappable_block_identifier_type sbid) = 0;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a2e3d0a4ecc042150e333f1325edd5ddb">  573</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a2e3d0a4ecc042150e333f1325edd5ddb">is_initialized</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a240fb311c2073cc91a2061f259528644">swappable_block_identifier_type</a> sbid)<span class="keyword"> const</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> swappable_blocks[sbid].is_initialized(); }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#ac3b773d78bd95f72dae2fbc7ede5ba75">  576</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ac3b773d78bd95f72dae2fbc7ede5ba75">explicit_timestep</a>() { }</div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a480224f1272cd6517c6df5a8102e6265">  577</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a480224f1272cd6517c6df5a8102e6265">is_simulating</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm.html#a059c06470d1069faf1806c96f36c1fda">  579</a></span>&#160;    <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">prediction_sequence_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a059c06470d1069faf1806c96f36c1fda">get_prediction_sequence</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> prediction_sequence; }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;};</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">//! Block scheduling algorithm caching via the least recently used policy (online).</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">class </span>block_scheduler_algorithm_online_lru : <span class="keyword">public</span> block_scheduler_algorithm&lt;SwappableBlockType&gt;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;{</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a47773f2914fb0803486abe09aed22fb7">  588</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a47773f2914fb0803486abe09aed22fb7">block_scheduler_type</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a22ae307a6132728d847301f8dcefee46">  589</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a22ae307a6132728d847301f8dcefee46">block_scheduler_algorithm_type</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3cf1f79fd43030b888270606a3eb1a7d">  590</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">block_scheduler_type::internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3cf1f79fd43030b888270606a3eb1a7d">internal_block_type</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a326322bf01386cd2677dd1db0ec8cefd">  591</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">block_scheduler_type::external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a326322bf01386cd2677dd1db0ec8cefd">external_block_type</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">  592</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">block_scheduler_type::swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::bs;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::swappable_blocks;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_algorithm_from_block_scheduler;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_free_internal_block_from_block_scheduler;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::return_free_internal_block_to_block_scheduler;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">    //! Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a60d3e6e4e0fefff6a7e504ebb517a661">  601</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1addressable__fifo__queue.html">addressable_fifo_queue&lt;swappable_block_identifier_type&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a60d3e6e4e0fefff6a7e504ebb517a661">evictable_blocks</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab7b76072efd97ea017a04d10ff4e7d6d">  603</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab7b76072efd97ea017a04d10ff4e7d6d">get_free_internal_block</a>()</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="comment">// try to get a free internal_block</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = get_free_internal_block_from_block_scheduler())</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">return</span> iblock;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// evict block</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        assert(! evictable_blocks.empty()); <span class="comment">// fails it there is not enough memory available</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">return</span> swappable_blocks[evictable_blocks.pop()].detach_internal_block();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a6b377c02c193b954cbeb95242e111931">  613</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a6b377c02c193b954cbeb95242e111931">return_free_internal_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    { return_free_internal_block_to_block_scheduler(iblock); }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a50586f9247ff1115ee6ab077de53e204">  616</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a50586f9247ff1115ee6ab077de53e204">init</a>()</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span> (get_algorithm_from_block_scheduler())</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">while</span> (! get_algorithm_from_block_scheduler()-&gt;evictable_blocks_empty())</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                evictable_blocks.insert(get_algorithm_from_block_scheduler()-&gt;evictable_blocks_pop());</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#adf27aa7c5395ae589a0b9f267e19687b">  624</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#adf27aa7c5395ae589a0b9f267e19687b">block_scheduler_algorithm_online_lru</a>(<a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; bs)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(bs)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    { init(); }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a656de54faeb04d4966cf5de1b2ce892f">  628</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a656de54faeb04d4966cf5de1b2ce892f">block_scheduler_algorithm_online_lru</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(old)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    { init(); }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a73c8c3fac495624d3764069b98f7cf18">  632</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a73c8c3fac495624d3764069b98f7cf18">~block_scheduler_algorithm_online_lru</a>()</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;Destructing block_scheduler_algorithm_online that still holds evictable blocks. They get deinitialized.&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">while</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            SwappableBlockType&amp; sblock = swappable_blocks[evictable_blocks.pop()];</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                return_free_internal_block(iblock);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a4fe767f02671afa478901a9812658d50">  644</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a4fe767f02671afa478901a9812658d50">evictable_blocks_empty</a>()</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    { <span class="keywordflow">return</span> evictable_blocks.empty(); }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#afd1812ef75949fda17466db2a5700103">  647</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#afd1812ef75949fda17466db2a5700103">evictable_blocks_pop</a>()</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    { <span class="keywordflow">return</span> evictable_blocks.pop(); }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a9466198ff87b6a3f6fd40851f1f359a7">  650</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a9466198ff87b6a3f6fd40851f1f359a7">acquire</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment">/* acquired =&gt; internal -&gt; increase reference count</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">           internal but not acquired -&gt; remove from evictable_blocks, increase reference count</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">           not internal =&gt; uninitialized or external -&gt; get internal_block, increase reference count</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">           uninitialized -&gt; fill with default value</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">           external -&gt; read */</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="comment">// not acquired yet -&gt; remove from evictable_blocks</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sblock.is_initialized())</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="comment">// =&gt; external but not internal</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="comment">//get internal_block</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            sblock.attach_internal_block(get_free_internal_block());</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">if</span> (! uninitialized)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="comment">//load block synchronously</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                sblock.read_sync();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="comment">// =&gt; ! sblock.is_initialized()</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="comment">//get internal_block</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            sblock.attach_internal_block(get_free_internal_block());</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="comment">//initialize new block</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">if</span> (! uninitialized)</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                sblock.fill_default();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">return</span> sblock.get_internal_block();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab63f83b9405ac02f385cdbefe50cd8c4">  688</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab63f83b9405ac02f385cdbefe50cd8c4">release</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty)</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        sblock.make_dirty_if(dirty);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        sblock.release();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keywordflow">if</span> (sblock.is_dirty() || sblock.is_external())</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="comment">// =&gt; evictable, put in pq</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                evictable_blocks.insert(sbid);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="comment">// =&gt; uninitialized, release internal block and put it in freelist</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                return_free_internal_block(sblock.detach_internal_block());</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a89d5f7af1d55a43e48e91c6ea2acedd5">  704</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a89d5f7af1d55a43e48e91c6ea2acedd5">deinitialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">if</span> (sblock.is_evictable())</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            return_free_internal_block(iblock);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ae364f773e92242c5e1f3f22908760c38">  713</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ae364f773e92242c5e1f3f22908760c38">initialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> eblock)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        sblock.initialize(eblock);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3fbf29e3baff0d26f666e11a015bf36f">  719</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3fbf29e3baff0d26f666e11a015bf36f">extract_external_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span> (sblock.is_evictable())</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            return_free_internal_block(sblock.detach_internal_block());</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">return</span> sblock.extract_external_block();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;};</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">//! Pseudo block scheduling algorithm only recording the request sequence.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html">  732</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html">block_scheduler_algorithm_simulation</a> : <span class="keyword">public</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>&lt;SwappableBlockType&gt;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;{</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae0821c64b3d08fc2919de8d7eb48a79e">  735</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae0821c64b3d08fc2919de8d7eb48a79e">block_scheduler_type</a>;</div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a75418084f8f87582c74a26054ce810f5">  736</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a75418084f8f87582c74a26054ce810f5">block_scheduler_algorithm_type</a>;</div>
<div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a69411e687e9f699a6717b8f93b7bffa2">  737</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">block_scheduler_type::internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a69411e687e9f699a6717b8f93b7bffa2">internal_block_type</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a3ee9c52371b779e5e32298dfc6ad7242">  738</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">block_scheduler_type::external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a3ee9c52371b779e5e32298dfc6ad7242">external_block_type</a>;</div>
<div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">  739</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">block_scheduler_type::swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac78e67c44fe70392c3d1cc56fd316302">  740</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">block_scheduler_type::prediction_sequence_element</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac78e67c44fe70392c3d1cc56fd316302">prediction_sequence_element_type</a>;</div>
<div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2d498be7696dcbff03a9009d0ba410ef">  741</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">block_scheduler_algorithm_type::time_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2d498be7696dcbff03a9009d0ba410ef">time_type</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::bs;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::prediction_sequence;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::swappable_blocks;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_algorithm_from_block_scheduler;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_free_internal_block_from_block_scheduler;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::return_free_internal_block_to_block_scheduler;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">    //! Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a41eb3ddfbe35e8528b9dae4bf62a9bc0">  751</a></span>&#160;<span class="comment"></span>    std::stack&lt;swappable_block_identifier_type&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a41eb3ddfbe35e8528b9dae4bf62a9bc0">evictable_blocks</a>;</div>
<div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2090e5622c587af102d59042e7843b23">  752</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">time_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2090e5622c587af102d59042e7843b23">time_count</a>;</div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8aa0d5185a48e05983630d5170e220a3">  753</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8aa0d5185a48e05983630d5170e220a3">last_op_release</a>;</div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a06bca62c688dba9f7f1a61d941a0e240">  754</a></span>&#160;    std::vector&lt;int_type&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a06bca62c688dba9f7f1a61d941a0e240">reference_counts</a>;</div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#afc7cd4c92aacaeba89d436525acf83da">  755</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#afc7cd4c92aacaeba89d436525acf83da">dummy_block</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8ca0ab112127d0c3bf989729c70c3f5c">  757</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8ca0ab112127d0c3bf989729c70c3f5c">return_free_internal_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    { return_free_internal_block_to_block_scheduler(iblock); }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af4d388624ea9ade69a35824fde2050cf">  760</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af4d388624ea9ade69a35824fde2050cf">init</a>()</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">if</span> (get_algorithm_from_block_scheduler())</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">while</span> (! get_algorithm_from_block_scheduler()-&gt;evictable_blocks_empty())</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                evictable_blocks.push(get_algorithm_from_block_scheduler()-&gt;evictable_blocks_pop());</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> i = 0; i &lt; reference_counts.size(); ++i)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            reference_counts[i] = swappable_blocks[i].is_initialized();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00770"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a434bbe8bae538a59b5ceff9e57b631c4">  770</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a434bbe8bae538a59b5ceff9e57b631c4">block_scheduler_algorithm_simulation</a>(<a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; bs)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(bs),</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          time_count(0),</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          last_op_release(false),</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          reference_counts(swappable_blocks.size())</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    { init(); }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac8b03b6abc63cd9a106f254eb4d02eed">  777</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac8b03b6abc63cd9a106f254eb4d02eed">block_scheduler_algorithm_simulation</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(old),</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          time_count(0),</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          last_op_release(false),</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          reference_counts(swappable_blocks.size())</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    { init(); }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a58ccfaa5ad80162e7a298afb866fe3b7">  784</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a58ccfaa5ad80162e7a298afb866fe3b7">~block_scheduler_algorithm_simulation</a>()</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;Destructing block_scheduler_algorithm_record_prediction_sequence that still holds evictable blocks. They get deinitialized.&quot;</span>);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">while</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            SwappableBlockType&amp; sblock = swappable_blocks[evictable_blocks.top()];</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                return_free_internal_block(iblock);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            evictable_blocks.pop();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1a8742c089815312e6ad6a6ab8b4e66d">  797</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1a8742c089815312e6ad6a6ab8b4e66d">evictable_blocks_empty</a>()</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    { <span class="keywordflow">return</span> evictable_blocks.empty(); }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abfca40fefb1808cff4eb142037ba95d1">  800</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abfca40fefb1808cff4eb142037ba95d1">evictable_blocks_pop</a>()</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid = evictable_blocks.top();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        evictable_blocks.pop();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">return</span> sbid;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ad7953b9b53549e70688870a5a1d66a28">  807</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ad7953b9b53549e70688870a5a1d66a28">acquire</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        ++reference_counts[sbid];</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        last_op_release = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">if</span> (uninitialized)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            prediction_sequence.push_back(</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_acquire_uninitialized, sbid, time_count)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            prediction_sequence.push_back(</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_acquire, sbid, time_count)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">return</span> dummy_block;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae3aa47bbbbc161de8607bfe253aab9e2">  822</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae3aa47bbbbc161de8607bfe253aab9e2">release</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        --reference_counts[sbid] += dirty;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        time_count += ! last_op_release;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        last_op_release = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">if</span> (dirty)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            prediction_sequence.push_back(</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_release_dirty, sbid, time_count)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                );</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            prediction_sequence.push_back(</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_release, sbid, time_count)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1950fefd878efe49b4e1e02a34dd5c30">  837</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1950fefd878efe49b4e1e02a34dd5c30">deinitialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        reference_counts[sbid] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        prediction_sequence.push_back(</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_deinitialize, sbid, time_count)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            );</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1bc09400046b9b62d7977f4dff5e442c">  845</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1bc09400046b9b62d7977f4dff5e442c">initialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a>)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        reference_counts[sbid] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        prediction_sequence.push_back(</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_initialize, sbid, time_count)</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            );</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af3110fade4db2bbf84349468bbd0fc14">  853</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af3110fade4db2bbf84349468bbd0fc14">extract_external_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        reference_counts[sbid] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        prediction_sequence.push_back(</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <a class="code" href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">prediction_sequence_element_type</a>(block_scheduler_type::op_extract_external_block, sbid, time_count)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            );</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a>();</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a27a46bd0d8b1a5e66e323a634567925f">  862</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a27a46bd0d8b1a5e66e323a634567925f">swappable_blocks_resize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> size)</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        reference_counts.resize(size, 0);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1e20478d2f67a74b0fac59d490914ab1">  867</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1e20478d2f67a74b0fac59d490914ab1">is_initialized</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">swappable_block_identifier_type</a> sbid)<span class="keyword"> const</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="keywordflow">return</span> reference_counts[sbid] &gt; 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a5f46e0029f83fdcf816d385908aae531">  872</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a5f46e0029f83fdcf816d385908aae531">explicit_timestep</a>()</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    { ++time_count; }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a00d1967e1c4a6cd35baadaff303ab9af">  875</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a00d1967e1c4a6cd35baadaff303ab9af">is_simulating</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="keyword">    </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;};</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">//! Block scheduling algorithm caching via the longest forward distance policy (offline).</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html">  881</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html">block_scheduler_algorithm_offline_lfd</a> : <span class="keyword">public</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>&lt;SwappableBlockType&gt;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;{</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab279053f8615be69fac23784fc7e3adb">  884</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab279053f8615be69fac23784fc7e3adb">block_scheduler_type</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a0adb0601b30d381eaba0efa45d8189b0">  885</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a0adb0601b30d381eaba0efa45d8189b0">block_scheduler_algorithm_type</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a27592e930c9dbcfcf1dd30dae61dc7dd">  886</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">block_scheduler_type::internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a27592e930c9dbcfcf1dd30dae61dc7dd">internal_block_type</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a3e04b494c1abcc1168053e59b92b1de6">  887</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">block_scheduler_type::external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a3e04b494c1abcc1168053e59b92b1de6">external_block_type</a>;</div>
<div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">  888</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">block_scheduler_type::swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a9907cf3901ddbf5a12f7c8ad7a19c407">  889</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">block_scheduler_algorithm_type::time_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a9907cf3901ddbf5a12f7c8ad7a19c407">time_type</a>;</div>
<div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab884d9e51c35597533d82762ba4184f2">  890</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">block_scheduler_type::prediction_sequence_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab884d9e51c35597533d82762ba4184f2">prediction_sequence_type</a>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::bs;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::swappable_blocks;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_algorithm_from_block_scheduler;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_free_internal_block_from_block_scheduler;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::return_free_internal_block_to_block_scheduler;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">  898</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">priority</a></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    {</div>
<div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a366df2df73202aa3e346bf9903444f8d">  900</a></span>&#160;        <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a366df2df73202aa3e346bf9903444f8d">p</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a6a090e7b2f8ce616d2b9803a609d62bd">  903</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a6a090e7b2f8ce616d2b9803a609d62bd">priority</a>(<span class="keyword">const</span> SwappableBlockType&amp; sblock, <span class="keyword">const</span> std::pair&lt;bool, time_type&gt;&amp; t)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="comment">// p larger =&gt; evict earlier</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">if</span> (t.first)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="comment">// most significant: next use</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                p = <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a>(t.second) &lt;&lt; 2;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="comment">// less significant: not dirty</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                p |= <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a>(! sblock.is_dirty()) &lt;&lt; 1;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <span class="comment">// less significant: has external_block</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                p |= <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a>(sblock.has_external_block()) &lt;&lt; 0;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <span class="comment">// most significant: next use</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                p = <a class="code" href="uint__types_8h.html#a0cfacbbf6e846521326f5de5ba3ecd05">std::numeric_limits&lt;unsigned_type&gt;::max</a>() &lt;&lt; 2;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                <span class="comment">// less significant: next operation: extract &gt; accessed no more &gt; deinitialize</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                p |= <a class="code" href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">unsigned_type</a>(t.second) &lt;&lt; 0;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="comment">// less =&gt; evict earlier</span></div>
<div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#aa38a7453eaaeb74e5c907295bbea692b">  925</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="uint__types_8h.html#adbe00c091ebf5a14e00337c9ab07180e">operator &lt; </a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">priority</a>&amp; right)<span class="keyword"> const</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="keyword">        </span>{ <span class="keywordflow">return</span> p &gt; right.<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a366df2df73202aa3e346bf9903444f8d">p</a>; }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    };</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">    //! Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a279eadcb0640d67a57e0131440615516">  930</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1addressable__priority__queue.html">addressable_priority_queue&lt;swappable_block_identifier_type, priority&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a279eadcb0640d67a57e0131440615516">evictable_blocks</a>;<span class="comment"></span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">    /*!</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">     * Stores for the sequence of releases extracted from the prediction_sequence:</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">     * (true, timestamp of the blocks next acquire) if it is acquired next</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">     * (false, 0) if it is deinitialized next</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">     * (false, 1) if it is not accessed any more</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">     * (false, 2) if it is extracted next</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">     * (false, 3) if it is initialized next</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00939"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ace34d8adc61d90a10e19a50a5a625627">  939</a></span>&#160;    std::deque&lt;std::pair&lt;bool, time_type&gt; &gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ace34d8adc61d90a10e19a50a5a625627">next_use</a>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a6d118758bd51421802c0dc6b65ca60e6">  941</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a6d118758bd51421802c0dc6b65ca60e6">get_free_internal_block</a>()</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="comment">// try to get a free internal_block</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = get_free_internal_block_from_block_scheduler())</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">return</span> iblock;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">// evict block</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        assert(! evictable_blocks.empty()); <span class="comment">// fails it there is not enough memory available</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span> swappable_blocks[evictable_blocks.pop()].detach_internal_block();</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aad8d519c7198de4cfb52d51b760e4140">  951</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aad8d519c7198de4cfb52d51b760e4140">return_free_internal_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    { return_free_internal_block_to_block_scheduler(iblock); }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#acab490ad749463564cef5105f880eb1d">  954</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#acab490ad749463564cef5105f880eb1d">init</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old_algo)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        std::vector&lt;std::pair&lt;bool, time_type&gt; &gt;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        blocks_next_acquire(swappable_blocks.size(), std::make_pair(<span class="keyword">false</span>, 1));</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">if</span> (old_algo)</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="comment">// precomputations for priorities: init next_acquires</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">prediction_sequence_type</a>&amp; ps = old_algo-&gt;<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a059c06470d1069faf1806c96f36c1fda">get_prediction_sequence</a>();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">typename</span> prediction_sequence_type::const_reverse_iterator it = ps.rbegin(); it != ps.rend(); ++it)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">switch</span> (it-&gt;op)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_acquire):</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_acquire_uninitialized):</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                    blocks_next_acquire[it-&gt;id] = std::make_pair(<span class="keyword">true</span>, it-&gt;time);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_release):</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_release_dirty):</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                    next_use.push_front(blocks_next_acquire[it-&gt;id]);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_deinitialize):</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                    blocks_next_acquire[it-&gt;id] = std::make_pair(<span class="keyword">false</span>, 0);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_initialize):</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                    blocks_next_acquire[it-&gt;id] = std::make_pair(<span class="keyword">false</span>, 3);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                <span class="keywordflow">case</span> (block_scheduler_type::op_extract_external_block):</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                    blocks_next_acquire[it-&gt;id] = std::make_pair(<span class="keyword">false</span>, 2);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">if</span> (get_algorithm_from_block_scheduler())</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">while</span> (! get_algorithm_from_block_scheduler()-&gt;evictable_blocks_empty())</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="comment">// insert already evictable blocks with the right priority</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                <span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid = get_algorithm_from_block_scheduler()-&gt;evictable_blocks_pop();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                evictable_blocks.insert(sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">priority</a>(swappable_blocks[sbid], blocks_next_acquire[sbid]));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7b7626e9e94267a4bd76b846f7dec7c">  998</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7b7626e9e94267a4bd76b846f7dec7c">block_scheduler_algorithm_offline_lfd</a>(<a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; bs)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(bs)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    { init(get_algorithm_from_block_scheduler()); }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="comment">// It is possible to keep an old simulation-algorithm object and reuse it&#39;s prediction sequence</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a30135baf17dbd6dcf499ae4337d5d1a3"> 1003</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a30135baf17dbd6dcf499ae4337d5d1a3">block_scheduler_algorithm_offline_lfd</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(old)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    { init(old); }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a17f402a7534dbe9d1e14f10e888a4141"> 1007</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a17f402a7534dbe9d1e14f10e888a4141">~block_scheduler_algorithm_offline_lfd</a>()</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">if</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;Destructing block_scheduler_algorithm_offline_lfd that still holds evictable blocks. They get deinitialized.&quot;</span>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keywordflow">while</span> (! evictable_blocks.empty())</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            SwappableBlockType&amp; sblock = swappable_blocks[evictable_blocks.pop()];</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                return_free_internal_block(iblock);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a62251147442fff8596645fd5ff6ce264"> 1019</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a62251147442fff8596645fd5ff6ce264">evictable_blocks_empty</a>()</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    { <span class="keywordflow">return</span> evictable_blocks.empty(); }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a08ceaf03709cae6aca65632beadd6a4f"> 1022</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a08ceaf03709cae6aca65632beadd6a4f">evictable_blocks_pop</a>()</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    { <span class="keywordflow">return</span> evictable_blocks.pop(); }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7364ccefa441a659383091166875ff8"> 1025</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7364ccefa441a659383091166875ff8">acquire</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">/* acquired =&gt; internal -&gt; increase reference count</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">           internal but not acquired -&gt; remove from evictable_blocks, increase reference count</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">           not intern =&gt; uninitialized or external -&gt; get internal_block, increase reference count</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">           uninitialized -&gt; fill with default value</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">           external -&gt; read */</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                <span class="comment">// not acquired yet -&gt; remove from evictable_blocks</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sblock.is_initialized())</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="comment">// =&gt; external but not internal</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="comment">//get internal_block</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            sblock.attach_internal_block(get_free_internal_block());</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">if</span> (! uninitialized)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="comment">//load block synchronously</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                sblock.read_sync();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <span class="comment">// =&gt; ! sblock.is_initialized()</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="comment">//get internal_block</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            sblock.attach_internal_block(get_free_internal_block());</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="comment">//initialize new block</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">if</span> (! uninitialized)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                sblock.fill_default();</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordflow">return</span> sblock.get_internal_block();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aa6fecd166011788fe849280769a657d6"> 1063</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aa6fecd166011788fe849280769a657d6">release</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">if</span> (next_use.empty())</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;block_scheduler_algorithm_offline_lfd got release-request but prediction sequence ended. Switching to block_scheduler_algorithm_online.&quot;</span>);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <span class="comment">// switch algorithm</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* new_algo, * old_algo;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            new_algo = <span class="keyword">new</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">block_scheduler_algorithm_online_lru&lt;SwappableBlockType&gt;</a>(bs);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            old_algo = bs.switch_algorithm_to(new_algo);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <span class="comment">// redirect call</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            new_algo-&gt;<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a069aa8d725c782a5f6abc413253492cd">release</a>(sbid, dirty);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            <span class="comment">// delete self</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keyword">delete</span> old_algo;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        sblock.make_dirty_if(dirty);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        sblock.release();</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <span class="keywordflow">if</span> (sblock.is_dirty() || sblock.is_external())</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <span class="comment">// =&gt; evictable, put in pq</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                evictable_blocks.insert(sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">priority</a>(swappable_blocks[sbid], next_use.front()));</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <span class="comment">// =&gt; uninitialized, release internal block and put it in freelist</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                return_free_internal_block(sblock.detach_internal_block());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        next_use.pop_front();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div>
<div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aaa3fc841fa42190d87ffd5258bb3653e"> 1093</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aaa3fc841fa42190d87ffd5258bb3653e">deinitialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">if</span> (sblock.is_evictable())</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            return_free_internal_block(iblock);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a40b073080ca8ae2c475bc3550829da5a"> 1102</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a40b073080ca8ae2c475bc3550829da5a">initialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> eblock)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        sblock.initialize(eblock);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a80edde4601a6f55cd62bff28a9588bd1"> 1108</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a80edde4601a6f55cd62bff28a9588bd1">extract_external_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordflow">if</span> (sblock.is_evictable())</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            return_free_internal_block(sblock.detach_internal_block());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">return</span> sblock.extract_external_block();</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;};</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">//! Block scheduling algorithm caching via the least recently used policy</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">//! (offline), and prefetching in addition.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> SwappableBlockType&gt;</div>
<div class="line"><a name="l01122"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html"> 1122</a></span>&#160;<span class="keyword">class </span><a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html">block_scheduler_algorithm_offline_lru_prefetching</a> : <span class="keyword">public</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm</a>&lt;SwappableBlockType&gt;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;{</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html">scheduled_block_meta</a>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7778f0fe1fae65f660a872d236140753"> 1126</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7778f0fe1fae65f660a872d236140753">block_scheduler_type</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad8a5b3bb99cce1437b30be5f76802c7f"> 1129</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm&lt;SwappableBlockType&gt;</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad8a5b3bb99cce1437b30be5f76802c7f">block_scheduler_algorithm_type</a>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7142e962ec1fbb06b09a66b6c6385d01"> 1130</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">block_scheduler_type::internal_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7142e962ec1fbb06b09a66b6c6385d01">internal_block_type</a>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae17635581183290bd621e69767d5299e"> 1131</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">block_scheduler_type::external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae17635581183290bd621e69767d5299e">external_block_type</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643"> 1132</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">block_scheduler_type::swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a39a9df58d9dce3abcd309ccd70c84309"> 1133</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">block_scheduler_algorithm_type::time_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a39a9df58d9dce3abcd309ccd70c84309">time_type</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a55d5c4ef712a2c31716a84d0e2ee069e"> 1134</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">block_scheduler_type::prediction_sequence_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a55d5c4ef712a2c31716a84d0e2ee069e">prediction_sequence_type</a>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a933e44586c93fc39ecb1da98204e9afe"> 1135</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">block_scheduler_type::block_scheduler_operation</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a933e44586c93fc39ecb1da98204e9afe">block_scheduler_operation</a>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a109d1ec473603f27bdf55d05e8623257"> 1136</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;SwappableBlockType&gt;::iterator <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a109d1ec473603f27bdf55d05e8623257">swappable_blocks_iterator</a>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div>
<div class="line"><a name="l01138"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a8fc7bfdfe21db217fef93d0cfc95b51f"> 1138</a></span>&#160;    <span class="keyword">typedef</span> std::map&lt;swappable_block_identifier_type, scheduled_block_meta&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a8fc7bfdfe21db217fef93d0cfc95b51f">scheduled_blocks_type</a>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27"> 1139</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> scheduled_blocks_type::iterator <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0b0bcc605dcb7a9f5d206e54c516ebf0"> 1140</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> scheduled_blocks_type::reference <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0b0bcc605dcb7a9f5d206e54c516ebf0">scheduled_blocks_reference</a>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6b5abc58de7641a80f9395176a68cd3d"> 1141</a></span>&#160;    <span class="keyword">typedef</span> std::map&lt;swappable_block_identifier_type, write_read_request*&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6b5abc58de7641a80f9395176a68cd3d">write_scheduled_blocks_type</a>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536"> 1142</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> write_scheduled_blocks_type::iterator <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a05553be98a99d696e17c6c160b86c852"> 1143</a></span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> write_scheduled_blocks_type::reference <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a05553be98a99d696e17c6c160b86c852">write_scheduled_blocks_reference</a>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::bs;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::swappable_blocks;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_algorithm_from_block_scheduler;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::get_free_internal_block_from_block_scheduler;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::return_free_internal_block_to_block_scheduler;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keyword">using</span> block_scheduler_algorithm_type::prediction_sequence;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div>
<div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html"> 1152</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    {</div>
<div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ab1f18ba1e1bfe630b81faae824f043b9"> 1154</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ab1f18ba1e1bfe630b81faae824f043b9">write_done_soon</a>;                          <span class="comment">// set by read_after_write, checked by schedule_read()</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a889e827b0e5ee3db354b2af40a648730"> 1155</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a889e827b0e5ee3db354b2af40a648730">shall_read</a>;                               <span class="comment">// checked by read_after_write, set by schedule_read()</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#aab2a7b3d623a4261bb71ed5c34b77f86"> 1156</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a109d1ec473603f27bdf55d05e8623257">swappable_blocks_iterator</a> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#aab2a7b3d623a4261bb71ed5c34b77f86">block_to_start_read</a>; <span class="comment">// used by read_after_write, set by schedule_read()</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ad093942c7d6451117fb350b19c093ab0"> 1157</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ad093942c7d6451117fb350b19c093ab0">taker</a>;               <span class="comment">// read_req set by read_after_write</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#af34562bb10fc9d66a3b23fcef06c261f"> 1158</a></span>&#160;        <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#af34562bb10fc9d66a3b23fcef06c261f">write_req</a>;                         <span class="comment">// completes with read_after_write</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a08acb5dd0cb1026410f73597243a56f0"> 1160</a></span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a08acb5dd0cb1026410f73597243a56f0">write_read_request</a>()</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            : write_done_soon(false), shall_read(false), block_to_start_read(), taker(), write_req(0) { }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    };</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html"> 1164</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html">read_after_write</a></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    {</div>
<div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#ab309fff437ed58b629a0a89bc5437822"> 1166</a></span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>* <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#ab309fff437ed58b629a0a89bc5437822">wrr</a>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#aab7ab93654b9d5344d53b37e17f246f1"> 1168</a></span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#aab7ab93654b9d5344d53b37e17f246f1">read_after_write</a>(<a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>* write_read_req)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            : wrr(write_read_req) { }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#a0aa979e28f2491558bbc4384b70ad202"> 1171</a></span>&#160;        <span class="keywordtype">void</span> operator () (<a class="code" href="classstxxl_1_1request.html">request</a>*)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            wrr-&gt;write_done_soon = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="keywordflow">if</span> (wrr-&gt;shall_read)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                wrr-&gt;taker-&gt;second.read_req = wrr-&gt;block_to_start_read-&gt;read_async();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    };</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html"> 1179</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html">scheduled_block_meta</a></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    {</div>
<div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#aebbfef184dec944facdbc14952a36515"> 1181</a></span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7142e962ec1fbb06b09a66b6c6385d01">internal_block_type</a>* <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#aebbfef184dec944facdbc14952a36515">reserved_iblock</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a7fce2e1371a6b3a01f5ac8c44a3079ba"> 1182</a></span>&#160;        std::pair&lt;bool, swappable_block_identifier_type&gt; <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a7fce2e1371a6b3a01f5ac8c44a3079ba">giver</a>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a8f6164b9b834e9e68ea8c16d11716d34"> 1183</a></span>&#160;        <a class="code" href="classstxxl_1_1counting__ptr.html">request_ptr</a> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a8f6164b9b834e9e68ea8c16d11716d34">read_req</a>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#acc35dd3fe63531c3dc2470d07dab7be7"> 1184</a></span>&#160;        std::deque&lt;block_scheduler_operation&gt; <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#acc35dd3fe63531c3dc2470d07dab7be7">operations</a>; <span class="comment">// invariant: not empty; front: last scheduled operation, back: upcoming operation</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a312076c67ac919f9f38c68145abcdf4f"> 1186</a></span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a312076c67ac919f9f38c68145abcdf4f">scheduled_block_meta</a>(<a class="code" href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">block_scheduler_operation</a> op)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            : reserved_iblock(0),</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;              giver(false, 0),</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;              read_req(0),</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;              operations()</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        { operations.push_front(op); }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    };</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">    //! Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aed962e7b0003b3bec54c3c179d58e4d8"> 1195</a></span>&#160;<span class="comment"></span>    std::set&lt;swappable_block_identifier_type&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aed962e7b0003b3bec54c3c179d58e4d8">free_evictable_blocks</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aaf3bb63e85ecfeab08b919f8046f56d3"> 1196</a></span>&#160;    std::set&lt;swappable_block_identifier_type&gt; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aaf3bb63e85ecfeab08b919f8046f56d3">scheduled_evictable_blocks</a>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">    //! Holds not internal swappable_blocks, whose next access has already been scheduled.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a65ffec64d617c8de01a76d5ce2f4f128"> 1199</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a8fc7bfdfe21db217fef93d0cfc95b51f">scheduled_blocks_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a65ffec64d617c8de01a76d5ce2f4f128">scheduled_blocks</a>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">    //! Holds swappable_blocks, whose internal block has been taken away but the clean did not finish yet.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#af6b89f29756f96d643e34a0851fa9655"> 1202</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6b5abc58de7641a80f9395176a68cd3d">write_scheduled_blocks_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#af6b89f29756f96d643e34a0851fa9655">write_scheduled_blocks</a>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a687fffdad96cf8a7b0eb35d0a423888c"> 1203</a></span>&#160;    <span class="keyword">typename</span> prediction_sequence_type::iterator <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a687fffdad96cf8a7b0eb35d0a423888c">next_op_to_schedule</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">    //! Schedule an internal, possibly dirty swappable_block to write.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">    //! The block becomes not dirty. if it was dirty, an entry in write_scheduled_blocks is made referencing the write_read_request.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">    //! \param sbid block to write</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">    //! \return pointer to the write_read_request</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a84441f1d252f0d864bd8e943116d2675"> 1210</a></span>&#160;<span class="comment"></span>    <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a84441f1d252f0d864bd8e943116d2675">schedule_write</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>* wrr = <span class="keyword">new</span> <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        wrr-&gt;<a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#af34562bb10fc9d66a3b23fcef06c261f">write_req</a> = sblock.clean_async(<a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html">read_after_write</a>(wrr));</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">if</span> (wrr-&gt;<a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#af34562bb10fc9d66a3b23fcef06c261f">write_req</a>.<a class="code" href="classstxxl_1_1counting__ptr.html#ae98580df566429cf4ba322a0f8ef20c7">valid</a>())</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            <span class="keywordtype">bool</span> t = write_scheduled_blocks.insert(std::make_pair(sbid, wrr)).second;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <a class="code" href="verbose_8h.html#a82893665c45c106f437deb9894987daf">STXXL_ASSERT</a>(t);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <span class="keywordflow">return</span> wrr;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keyword">delete</span> wrr;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">    //! Try to interrupt a read scheduled in a write_read_request.</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">    //! side-effect: possibly erases entry from write_scheduled_blocks, so the iterator writing_block may become invalid</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">    //! \return if successful</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae2642e905b85db5ab484cfd76503a706"> 1232</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae2642e905b85db5ab484cfd76503a706">try_interrupt_read</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a>&amp; writing_block)</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="comment">// stop read</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        writing_block-&gt;second-&gt;shall_read = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="comment">// check if stopped</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="keywordflow">if</span> (! writing_block-&gt;second-&gt;write_done_soon)</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">// =&gt; possibly to late</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0b0bcc605dcb7a9f5d206e54c516ebf0">scheduled_blocks_reference</a> taker = *writing_block-&gt;second-&gt;taker;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="comment">// wait</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        wait_on_write(writing_block);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="comment">// check if read started</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">if</span> (taker.second.read_req.valid())</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="comment">// =&gt; read started, to late</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <span class="comment">// =&gt; just in time</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">    //! Schedule an internal and external block to read.</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">    //! If the giver is still writing, schedule read via its write_read_request.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a36155ae2264124dfaea08bef48b38720"> 1255</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a36155ae2264124dfaea08bef48b38720">schedule_read</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> block_to_read)</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="comment">// first check if block_to_read is still writing. do not read before write finished</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="comment">// wait_on_write(block_to_read-&gt;first);</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(block_to_read-&gt;first);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> other_block_to_read = it-&gt;second-&gt;taker;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="comment">// check if scheduled to read</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">if</span> (it-&gt;second-&gt;shall_read)</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="keywordflow">if</span> (try_interrupt_read(it))</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                    <span class="comment">// =&gt; interrupted, swap internal_blocks</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                    std::swap(other_block_to_read-&gt;second.giver, block_to_read-&gt;second.giver);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                    <span class="keywordflow">if</span> (other_block_to_read-&gt;second.giver.first)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                    {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(other_block_to_read-&gt;second.giver.second);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                            it-&gt;second-&gt;taker = other_block_to_read;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                            other_block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    <span class="keywordflow">if</span> (block_to_read-&gt;second.giver.first)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                    {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(block_to_read-&gt;second.giver.second);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                        <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                            it-&gt;second-&gt;taker = block_to_read;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                            block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                    }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* tmp_iblock = swappable_blocks[block_to_read-&gt;first].detach_internal_block();</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                    swappable_blocks[block_to_read-&gt;first].attach_internal_block(</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                        swappable_blocks[other_block_to_read-&gt;first].detach_internal_block());</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    swappable_blocks[other_block_to_read-&gt;first].attach_internal_block(tmp_iblock);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    <span class="comment">// =&gt; this block has its internal_block back, no need to read</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    <span class="comment">// reschedule other</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    schedule_read(other_block_to_read);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <span class="comment">// else =&gt; read already started, but write done -&gt; read this</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                <span class="comment">// =&gt; no read scheduled, swap internal_blocks</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                std::swap(other_block_to_read-&gt;second.giver, block_to_read-&gt;second.giver);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <span class="keywordflow">if</span> (other_block_to_read-&gt;second.giver.first)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(other_block_to_read-&gt;second.giver.second);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                    <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                        it-&gt;second-&gt;taker = other_block_to_read;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                        other_block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                <span class="keywordflow">if</span> (block_to_read-&gt;second.giver.first)</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(block_to_read-&gt;second.giver.second);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                    <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                        it-&gt;second-&gt;taker = block_to_read;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                        block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* tmp_iblock = swappable_blocks[block_to_read-&gt;first].detach_internal_block();</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                swappable_blocks[block_to_read-&gt;first].attach_internal_block(</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                    other_block_to_read-&gt;second.reserved_iblock);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                other_block_to_read-&gt;second.reserved_iblock = tmp_iblock;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <span class="comment">// =&gt; this block has its internal_block back, no need to read</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="comment">// schedule block_to_read to read</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> (block_to_read-&gt;second.giver.first)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> writing_block = write_scheduled_blocks.find(block_to_read-&gt;second.giver.second);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <span class="keywordflow">if</span> (writing_block != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="comment">// =&gt; there is a write scheduled</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                <span class="comment">// tell the completion handler that we want a read</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                writing_block-&gt;second-&gt;block_to_start_read = swappable_blocks.begin() + block_to_read-&gt;first;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                writing_block-&gt;second-&gt;taker = block_to_read;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                writing_block-&gt;second-&gt;shall_read = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                <span class="comment">// and check if it is not to late</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="keywordflow">if</span> (writing_block-&gt;second-&gt;write_done_soon)</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                    <span class="comment">// =&gt; the completion handler may have missed our wish to read</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    <span class="comment">// so wait for it to finish and check</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                    wait_on_write(writing_block);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                    block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    <span class="keywordflow">if</span> (block_to_read-&gt;second.read_req.valid())</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                        <span class="comment">// read scheduled</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                    <span class="comment">// read scheduled</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                block_to_read-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="comment">// =&gt; read could not be scheduled through the completion handler</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        block_to_read-&gt;second.read_req = swappable_blocks[block_to_read-&gt;first].read_async();</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">    //! Wait for the write to finish.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">    //! side-effect: erases entry from write_scheduled_blocks</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#abdaa2ef0512f8fce9f1bc029a3584071"> 1365</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#abdaa2ef0512f8fce9f1bc029a3584071">wait_on_write</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a>&amp; writing_block)</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        writing_block-&gt;second-&gt;write_req-&gt;wait();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keyword">delete</span> writing_block-&gt;second;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        write_scheduled_blocks.erase(writing_block);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">    //! Wait for the write to finish.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">    //! side-effect: erases entry from write_scheduled_blocks</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a1ec395bdec16447a443dc81f3f968191"> 1375</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a1ec395bdec16447a443dc81f3f968191">wait_on_write</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a>&amp; writing_block)</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.find(writing_block);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">if</span> (it != write_scheduled_blocks.end())</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            wait_on_write(it);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">    //! Wait for the write of the giver to finish.</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">    //! side-effect: erases entry from write_scheduled_blocks</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6c906b88c48e175cacf0542c45057ddd"> 1385</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6c906b88c48e175cacf0542c45057ddd">wait_on_write</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta)</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordflow">if</span> (schedule_meta-&gt;second.giver.first)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            wait_on_write(schedule_meta-&gt;second.giver.second);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            schedule_meta-&gt;second.giver.first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">    //! Wait for the read to finish.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">    //! side-effect: erases entry for the write of the giver from write_scheduled_blocks</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a43daa8aa4b5aea88b9ca025f3956bc91"> 1397</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a43daa8aa4b5aea88b9ca025f3956bc91">wait_on_read</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta)</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        wait_on_write(schedule_meta);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">if</span> (schedule_meta-&gt;second.read_req.valid())</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            schedule_meta-&gt;second.read_req-&gt;wait();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            schedule_meta-&gt;second.read_req = 0;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">    //! Wait for the write of the giver to finish and return reserved internal_block.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">    //!</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">    //! side-effect: erases entry for the write of the giver from write_scheduled_blocks</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab2f420a0d01eb38fb1b7b0f7c0265e73"> 1410</a></span>&#160;<span class="comment"></span>    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab2f420a0d01eb38fb1b7b0f7c0265e73">get_ready_block</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta)</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        wait_on_write(schedule_meta);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* r = schedule_meta-&gt;second.reserved_iblock;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        schedule_meta-&gt;second.reserved_iblock = 0;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab8990567e282d669a1813d0759ed1742"> 1418</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab8990567e282d669a1813d0759ed1742">shall_keep_internal_block</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta, <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_first = <span class="keyword">true</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="comment">// returns true iif there is an acquire or acquire_uninitialized scheduled or there is a deinitialize scheduled and the block is dirty</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::deque&lt;block_scheduler_operation&gt;::reverse_iterator</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;             rit = schedule_meta-&gt;second.operations.rbegin() + ignore_first;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;             rit != schedule_meta-&gt;second.operations.rend(); ++rit)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            <span class="keywordflow">switch</span> (*rit)</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_acquire:</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_acquire_uninitialized:</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_release:</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_release_dirty:</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_deinitialize:</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                <span class="keywordflow">if</span> (swappable_blocks[schedule_meta-&gt;first].is_dirty()) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_initialize:</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_extract_external_block:</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="comment">// assumes the current operation to be still in operations</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aea575b1a04ce4d0e3f23b3e6cb68065e"> 1445</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aea575b1a04ce4d0e3f23b3e6cb68065e">shall_be_cleaned</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta)<span class="keyword"> const</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="comment">// returns true iif there is an extract_external_block scheduled and no release_dirty, deinitialize or initialize before</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::deque&lt;block_scheduler_operation&gt;::reverse_iterator</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;             rit = schedule_meta-&gt;second.operations.rbegin() + 1;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;             rit != schedule_meta-&gt;second.operations.rend(); ++rit)</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="keywordflow">switch</span> (*rit)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_acquire:</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_acquire_uninitialized:</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_release:</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_release_dirty:</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_deinitialize:</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_initialize:</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <span class="keywordflow">case</span> block_scheduler_type::op_extract_external_block:</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70b0be0df2deb05341b1dd9b7d64ee74"> 1471</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70b0be0df2deb05341b1dd9b7d64ee74">shall_be_read</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta, <span class="keyword">const</span> <span class="keywordtype">bool</span> ignore_first = <span class="keyword">true</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="keyword">    </span>{</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="comment">// returns true iif there is an acquire scheduled next and the block is initialized</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">return</span> swappable_blocks[schedule_meta-&gt;first].is_initialized()</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;               &amp;&amp; schedule_meta-&gt;second.operations.rbegin() + ignore_first != schedule_meta-&gt;second.operations.rend()</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;               &amp;&amp; *(schedule_meta-&gt;second.operations.rbegin() + ignore_first) == block_scheduler_type::op_acquire;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aa91aa3b3e5f02d504a49d0aecf9ce865"> 1479</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aa91aa3b3e5f02d504a49d0aecf9ce865">operation_done</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a>&amp; schedule_meta)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        schedule_meta-&gt;second.operations.pop_back();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keywordflow">if</span> (schedule_meta-&gt;second.operations.empty())</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            assert(! schedule_meta-&gt;second.giver.first);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            scheduled_blocks.erase(schedule_meta);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a17f53259ee202102925c86ad113665ea"> 1489</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a> * <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a17f53259ee202102925c86ad113665ea">give_up</a>(std::string err_msg = <span class="stringliteral">&quot;detected some error in the prediction sequence&quot;</span>)</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;block_scheduler_algorithm_offline_lru_prefetching: &quot;</span> &lt;&lt; err_msg &lt;&lt; <span class="stringliteral">&quot;. Switching to block_scheduler_algorithm_online.&quot;</span>);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <span class="comment">// switch algorithm</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* new_algo</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            = <span class="keyword">new</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">block_scheduler_algorithm_online_lru&lt;SwappableBlockType&gt;</a>(bs);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="comment">// and delete self</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keyword">delete</span> bs.switch_algorithm_to(new_algo);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">return</span> new_algo;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div>
<div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a557212eee781cd4c982720137702ea20"> 1500</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a557212eee781cd4c982720137702ea20">return_free_internal_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a>* iblock)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    { return_free_internal_block_to_block_scheduler(iblock); }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div>
<div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#afa498843473a660c6fe83b53c005c060"> 1503</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#afa498843473a660c6fe83b53c005c060">schedule_next_operations</a>()</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">while</span> (next_op_to_schedule != prediction_sequence.end())</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <span class="comment">// list operation in scheduled_blocks</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            std::pair&lt;scheduled_blocks_iterator, bool&gt; ins_res = scheduled_blocks.insert(</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                std::make_pair(next_op_to_schedule-&gt;id, next_op_to_schedule-&gt;op));</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = ins_res.first;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            <span class="keywordflow">if</span> (! ins_res.second)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                schedule_meta-&gt;second.operations.push_front(next_op_to_schedule-&gt;op);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            SwappableBlockType&amp; sblock = swappable_blocks[next_op_to_schedule-&gt;id];</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <span class="comment">// do appropriate preparations</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <span class="keywordflow">if</span> (next_op_to_schedule-&gt;op == block_scheduler_type::op_acquire</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                || next_op_to_schedule-&gt;op == block_scheduler_type::op_acquire_uninitialized)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                    <span class="keywordflow">if</span> (free_evictable_blocks.erase(next_op_to_schedule-&gt;id))</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                        scheduled_evictable_blocks.insert(next_op_to_schedule-&gt;id);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                    <span class="keywordflow">if</span> (! schedule_meta-&gt;second.reserved_iblock)</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                    {</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                        <span class="comment">// =&gt; needs internal_block -&gt; try to get one</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                        <span class="comment">// -&gt; try to get one from block_scheduler</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                        schedule_meta-&gt;second.reserved_iblock = get_free_internal_block_from_block_scheduler();</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                        <span class="keywordflow">if</span> (! schedule_meta-&gt;second.reserved_iblock)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                        {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                            <span class="comment">// -&gt; try to get one by evicting</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                            <span class="keywordflow">if</span> (free_evictable_blocks.empty())</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                            {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                                <span class="comment">// =&gt; can not schedule acquire</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                <span class="comment">// remove operation from scheduled_blocks</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                <span class="keywordflow">if</span> (ins_res.second)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                    scheduled_blocks.erase(ins_res.first);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                                    schedule_meta-&gt;second.operations.pop_front();</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                                <span class="comment">// stop scheduling</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                            }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> giver = <a class="code" href="namespacestxxl.html#a37feb00474dd76f7dfc8fc5352123a34">pop_begin</a>(free_evictable_blocks);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                            {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                                assert(scheduled_blocks.find(giver) == scheduled_blocks.end() ||</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                                       !shall_keep_internal_block(scheduled_blocks.find(giver), <span class="keyword">false</span>));</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                            }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                            <a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">write_read_request</a>* wrr = schedule_write(giver);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                            schedule_meta-&gt;second.giver.first = (wrr != NULL);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                            schedule_meta-&gt;second.giver.second = giver;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                            schedule_meta-&gt;second.reserved_iblock = swappable_blocks[giver].detach_internal_block();</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                            <span class="keywordflow">if</span> (wrr)</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                                wrr-&gt;<a class="code" href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ad093942c7d6451117fb350b19c093ab0">taker</a> = schedule_meta;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                        }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                        <span class="comment">// read if desired</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                        <span class="keywordflow">if</span> (shall_be_read(schedule_meta, <span class="keyword">false</span>))</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                        {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                            <span class="comment">// =&gt; there is no operation scheduled for this block before this acquire and it is initialized</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                            <span class="comment">// -&gt; start prefetching now</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                            sblock.attach_internal_block(schedule_meta-&gt;second.reserved_iblock);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                            schedule_meta-&gt;second.reserved_iblock = 0;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                            scheduled_evictable_blocks.insert(next_op_to_schedule-&gt;id);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                            schedule_read(schedule_meta);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                        }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                    }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                }</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            }</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next_op_to_schedule-&gt;op == block_scheduler_type::op_deinitialize)</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                <span class="keywordflow">if</span> (sblock.is_dirty())</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                    <span class="keywordflow">if</span> (free_evictable_blocks.erase(next_op_to_schedule-&gt;id))</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                        scheduled_evictable_blocks.insert(next_op_to_schedule-&gt;id);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            ++next_op_to_schedule;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">typename</span> std::set&lt;swappable_block_identifier_type&gt;::iterator it = free_evictable_blocks.begin();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;             it != free_evictable_blocks.end(); ++it)</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <span class="keywordflow">if</span> (! write_scheduled_blocks.count(*it))</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                schedule_write(*it);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div>
<div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a383fd0ba9b29e6a5062f2db2e2e63459"> 1587</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a383fd0ba9b29e6a5062f2db2e2e63459">init</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old_algo)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordflow">if</span> (old_algo)</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <span class="comment">// copy prediction sequence</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            prediction_sequence = old_algo-&gt;<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a059c06470d1069faf1806c96f36c1fda">get_prediction_sequence</a>();</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        next_op_to_schedule = prediction_sequence.begin();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="keywordflow">if</span> (get_algorithm_from_block_scheduler())</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <span class="keywordflow">while</span> (! get_algorithm_from_block_scheduler()-&gt;evictable_blocks_empty())</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                free_evictable_blocks.insert(get_algorithm_from_block_scheduler()-&gt;evictable_blocks_pop());</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        schedule_next_operations();</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div>
<div class="line"><a name="l01599"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae733b230d8d247ce95410d261754d996"> 1599</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae733b230d8d247ce95410d261754d996">deinit</a>()</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="comment">// TODO remove</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordflow">if</span> (! scheduled_blocks.empty())</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;            <a class="code" href="verbose_8h.html#afec876b95f7d6cc4b0f0bd4c0d7d89a0">STXXL_MSG</a>(<span class="stringliteral">&quot;deinit while scheduled_blocks not empty&quot;</span>);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="keywordflow">if</span> (! scheduled_evictable_blocks.empty())</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <a class="code" href="verbose_8h.html#afec876b95f7d6cc4b0f0bd4c0d7d89a0">STXXL_MSG</a>(<span class="stringliteral">&quot;deinit while scheduled_evictable_blocks not empty&quot;</span>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="comment">// empty scheduled_blocks</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        free_evictable_blocks.insert(scheduled_evictable_blocks.begin(), scheduled_evictable_blocks.end());</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="comment">//for (typename std::set&lt;swappable_block_identifier_type&gt;::iterator it = scheduled_evictable_blocks.begin();</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="comment">//        it != scheduled_evictable_blocks.end(); ++it)</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="comment">//    free_evictable_blocks.insert(*it);</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        scheduled_evictable_blocks.clear();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keywordflow">while</span> (! scheduled_blocks.empty())</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> it = scheduled_blocks.begin();</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            wait_on_read(it);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            <span class="keywordflow">if</span> (it-&gt;second.reserved_iblock)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                return_free_internal_block(it-&gt;second.reserved_iblock);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            scheduled_blocks.erase(it);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">while</span> (! write_scheduled_blocks.empty())</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        {</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">write_scheduled_blocks_iterator</a> it = write_scheduled_blocks.begin();</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            wait_on_write(it);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        }</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a4796c36c347e619f8816b5136a9be68f"> 1629</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a4796c36c347e619f8816b5136a9be68f">block_scheduler_algorithm_offline_lru_prefetching</a>(<a class="code" href="classstxxl_1_1block__scheduler.html">block_scheduler_type</a>&amp; bs)</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(bs)</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    { init(get_algorithm_from_block_scheduler()); }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="comment">// It is possible to keep an old simulation-algorithm object and reuse it&#39;s prediction sequence</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a093046b4f690605dba90e794ec153bbd"> 1634</a></span>&#160;    <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a093046b4f690605dba90e794ec153bbd">block_scheduler_algorithm_offline_lru_prefetching</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>* old)</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        : <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html">block_scheduler_algorithm_type</a>(old)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    { init(old); }</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div>
<div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a5b06ba836854177ac837da9ab00836ec"> 1638</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a5b06ba836854177ac837da9ab00836ec">~block_scheduler_algorithm_offline_lru_prefetching</a>()</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        deinit();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">if</span> (! free_evictable_blocks.empty())</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;Destructing block_scheduler_algorithm_offline_lru_prefetching that still holds evictable blocks. They get deinitialized.&quot;</span>);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="keywordflow">while</span> (! free_evictable_blocks.empty())</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            SwappableBlockType&amp; sblock = swappable_blocks[<a class="code" href="namespacestxxl.html#a37feb00474dd76f7dfc8fc5352123a34">pop_begin</a>(free_evictable_blocks)];</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                return_free_internal_block(iblock);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70aacef91a44d3fab5708d0f740c7e90"> 1651</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70aacef91a44d3fab5708d0f740c7e90">evictable_blocks_empty</a>()</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        deinit();</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keywordflow">return</span> free_evictable_blocks.empty();</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div>
<div class="line"><a name="l01657"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aca78d122cd7d00ee256e631d07960f74"> 1657</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aca78d122cd7d00ee256e631d07960f74">evictable_blocks_pop</a>()</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    { <span class="keywordflow">return</span> <a class="code" href="namespacestxxl.html#a37feb00474dd76f7dfc8fc5352123a34">pop_begin</a>(free_evictable_blocks); }</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a33dda105dddbbe4a0360c4e66ba598d4"> 1660</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> &amp; <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a33dda105dddbbe4a0360c4e66ba598d4">acquire</a>(<span class="keyword">const</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> uninitialized = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    {</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        assert(! prediction_sequence.empty());</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        assert(prediction_sequence.front().op ==</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;               ((uninitialized) ? block_scheduler_type::op_acquire_uninitialized : block_scheduler_type::op_acquire));</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        assert(prediction_sequence.front().id == sbid);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        prediction_sequence.pop_front();</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = scheduled_blocks.find(sbid);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        assert(schedule_meta != scheduled_blocks.end());                                                               <span class="comment">// acquire not scheduled or out of internal_blocks (i.e. not enough internal memory)</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        assert(schedule_meta-&gt;second.operations.back() ==</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;               ((uninitialized) ? block_scheduler_type::op_acquire_uninitialized : block_scheduler_type::op_acquire)); <span class="comment">// acquire not scheduled or out of internal_blocks (i.e. not enough internal memory)</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="comment">/* acquired =&gt; internal -&gt; increase reference count</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">           internal but not acquired -&gt; remove from scheduled_evictable_blocks, increase reference count</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">           not internal =&gt; uninitialized or external -&gt; get internal_block, increase reference count</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">           uninitialized -&gt; fill with default value</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment">           external -&gt; read */</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keywordflow">if</span> (sblock.is_internal())</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                <span class="comment">// not acquired yet -&gt; remove from scheduled_evictable_blocks</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                <span class="keywordtype">size_t</span> t = scheduled_evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                <a class="code" href="verbose_8h.html#a82893665c45c106f437deb9894987daf">STXXL_ASSERT</a>(t != 0);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                wait_on_read(schedule_meta);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        {</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            assert(uninitialized || ! sblock.is_initialized()); <span class="comment">// initialized blocks should be scheduled to read and thus internal</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            <span class="comment">//get internal_block</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            sblock.attach_internal_block(get_ready_block(schedule_meta));</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            sblock.acquire();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            <span class="comment">//initialize new block</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="keywordflow">if</span> (! uninitialized)</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                sblock.fill_default();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        operation_done(schedule_meta);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">return</span> sblock.get_internal_block();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div>
<div class="line"><a name="l01704"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad00d560b35894bea7835241b5dfaca8c"> 1704</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad00d560b35894bea7835241b5dfaca8c">release</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid, <span class="keyword">const</span> <span class="keywordtype">bool</span> dirty)</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        assert(! prediction_sequence.empty());</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        assert(prediction_sequence.front().op ==</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;               ((dirty) ? block_scheduler_type::op_release_dirty : block_scheduler_type::op_release));</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        assert(prediction_sequence.front().id == sbid);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        prediction_sequence.pop_front();</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = scheduled_blocks.find(sbid);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        assert(schedule_meta != scheduled_blocks.end());</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        assert(schedule_meta-&gt;second.operations.back() ==</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;               ((dirty) ? block_scheduler_type::op_release_dirty : block_scheduler_type::op_release));</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        sblock.make_dirty_if(dirty);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        sblock.release();</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="keywordflow">if</span> (! sblock.is_acquired())</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <span class="keywordflow">if</span> (sblock.is_dirty() || sblock.is_external())</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                <span class="comment">// =&gt; evictable</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                <span class="keywordflow">if</span> (shall_keep_internal_block(schedule_meta))</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                    <span class="comment">// =&gt; swappable_block shall keep its internal_block</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                    scheduled_evictable_blocks.insert(sbid);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                    <span class="keywordflow">if</span> (shall_be_cleaned(schedule_meta))</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                        schedule_write(sbid);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                    <span class="comment">// give block to scheduler</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                    free_evictable_blocks.insert(sbid);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                    <span class="keywordflow">if</span> (next_op_to_schedule != prediction_sequence.end())</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                        schedule_next_operations();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                        <span class="keywordflow">if</span> (! write_scheduled_blocks.count(sbid))</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                            schedule_write(sbid);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                    }</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                }</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            }</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <span class="comment">// =&gt; uninitialized</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                <span class="keywordflow">if</span> (shall_keep_internal_block(schedule_meta))</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    <span class="comment">// =&gt; swappable_block shall keep its internal_block</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                    schedule_meta-&gt;second.reserved_iblock = sblock.detach_internal_block();</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                    <span class="comment">// release internal block and give it to prefetcher</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    return_free_internal_block(sblock.detach_internal_block());</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                    <span class="keywordflow">if</span> (next_op_to_schedule != prediction_sequence.end())</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                        schedule_next_operations();</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        operation_done(schedule_meta);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab5f800ca83b31fbac851fe2deff1df19"> 1761</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab5f800ca83b31fbac851fe2deff1df19">deinitialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        assert(! prediction_sequence.empty());</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        assert(prediction_sequence.front().op == block_scheduler_type::op_deinitialize);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        assert(prediction_sequence.front().id == sbid);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        prediction_sequence.pop_front();</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = scheduled_blocks.find(sbid);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        assert(schedule_meta != scheduled_blocks.end());</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        assert(schedule_meta-&gt;second.operations.back() == block_scheduler_type::op_deinitialize);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <span class="keywordflow">if</span> (sblock.is_evictable())</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            <span class="keywordtype">size_t</span> t;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            <span class="keywordflow">if</span> (shall_keep_internal_block(schedule_meta, <span class="keyword">false</span>))</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                t = scheduled_evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                <span class="keywordflow">if</span> (t == 0) {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                    <a class="code" href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a>(<span class="stringliteral">&quot;dirty block not scheduled on deinitialize&quot;</span>);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                    t = free_evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                t = free_evictable_blocks.erase(sbid);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            assert(t != 0);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">internal_block_type</a> * iblock = sblock.deinitialize())</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            <span class="keywordflow">if</span> (shall_keep_internal_block(schedule_meta))</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                <span class="comment">// =&gt; swappable_block shall keep its internal_block</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                schedule_meta-&gt;second.reserved_iblock = iblock;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                <span class="comment">// release internal block and give it to prefetcher</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                return_free_internal_block(iblock);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                <span class="keywordflow">if</span> (next_op_to_schedule != prediction_sequence.end())</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                    schedule_next_operations();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        operation_done(schedule_meta);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab962d3ae69fcac58f9b9e1ad6d131011"> 1803</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab962d3ae69fcac58f9b9e1ad6d131011">initialize</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid, <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> eblock)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        assert(! prediction_sequence.empty());</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        assert(prediction_sequence.front().op == block_scheduler_type::op_initialize);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        assert(prediction_sequence.front().id == sbid);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        prediction_sequence.pop_front();</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = scheduled_blocks.find(sbid);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        assert(schedule_meta != scheduled_blocks.end());</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        assert(schedule_meta-&gt;second.operations.back() == block_scheduler_type::op_initialize);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        sblock.initialize(eblock);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="keywordflow">if</span> (shall_be_read(schedule_meta))</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            sblock.attach_internal_block(schedule_meta-&gt;second.reserved_iblock);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            schedule_meta-&gt;second.reserved_iblock = 0;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            scheduled_evictable_blocks.insert(sbid);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            schedule_read(schedule_meta);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        operation_done(schedule_meta);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div>
<div class="line"><a name="l01825"></a><span class="lineno"><a class="line" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a30f586fea926d71869e8938464c4c18a"> 1825</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">external_block_type</a> <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a30f586fea926d71869e8938464c4c18a">extract_external_block</a>(<a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">swappable_block_identifier_type</a> sbid)</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        assert(! prediction_sequence.empty());</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        assert(prediction_sequence.front().op == block_scheduler_type::op_extract_external_block);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        assert(prediction_sequence.front().id == sbid);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        prediction_sequence.pop_front();</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <a class="code" href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">scheduled_blocks_iterator</a> schedule_meta = scheduled_blocks.find(sbid);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        assert(schedule_meta != scheduled_blocks.end());</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        assert(schedule_meta-&gt;second.operations.back() == block_scheduler_type::op_extract_external_block);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        SwappableBlockType&amp; sblock = swappable_blocks[sbid];</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        wait_on_write(sbid);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        operation_done(schedule_meta);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">return</span> sblock.extract_external_block();</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;};</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<a class="code" href="namespace_8h.html#abf690e046efa58c85da1f450bb098392">STXXL_END_NAMESPACE</a></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="preprocessor">#endif // !STXXL_MNG_BLOCK_SCHEDULER_HEADER</span></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_aee12f86d2a578fd57dd8dcc2ac63ce76"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#aee12f86d2a578fd57dd8dcc2ac63ce76">stxxl::swappable_block::detach_internal_block</a></div><div class="ttdeci">internal_block_type * detach_internal_block()</div><div class="ttdoc">Detach the internal_block. Writes to external_block if necessary. Has to be evictable. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00187">block_scheduler.h:187</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a60d3e6e4e0fefff6a7e504ebb517a661"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a60d3e6e4e0fefff6a7e504ebb517a661">stxxl::block_scheduler_algorithm_online_lru::evictable_blocks</a></div><div class="ttdeci">addressable_fifo_queue&lt; swappable_block_identifier_type &gt; evictable_blocks</div><div class="ttdoc">Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00601">block_scheduler.h:601</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a43daa8aa4b5aea88b9ca025f3956bc91"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a43daa8aa4b5aea88b9ca025f3956bc91">stxxl::block_scheduler_algorithm_offline_lru_prefetching::wait_on_read</a></div><div class="ttdeci">void wait_on_read(const scheduled_blocks_iterator &amp;schedule_meta)</div><div class="ttdoc">Wait for the read to finish. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01397">block_scheduler.h:1397</a></div></div>
<div class="ttc" id="verbose_8h_html_a82893665c45c106f437deb9894987daf"><div class="ttname"><a href="verbose_8h.html#a82893665c45c106f437deb9894987daf">STXXL_ASSERT</a></div><div class="ttdeci">#define STXXL_ASSERT(condition)</div><div class="ttdef"><b>Definition:</b> <a href="verbose_8h_source.html#l00171">verbose.h:171</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a17f53259ee202102925c86ad113665ea"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a17f53259ee202102925c86ad113665ea">stxxl::block_scheduler_algorithm_offline_lru_prefetching::give_up</a></div><div class="ttdeci">block_scheduler_algorithm_type * give_up(std::string err_msg=&quot;detected some error in the prediction sequence&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01489">block_scheduler.h:1489</a></div></div>
<div class="ttc" id="namespacestxxl_html_a13269a96a32504fec831ef023fdac7b6"><div class="ttname"><a href="namespacestxxl.html#a13269a96a32504fec831ef023fdac7b6">stxxl::div_ceil</a></div><div class="ttdeci">compat::remove_const&lt; Integral &gt;::type div_ceil(Integral n, Integral2 d)</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a2ec11b9ea6afd232145ff380fa26215b"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a2ec11b9ea6afd232145ff380fa26215b">stxxl::swappable_block::get_external_block</a></div><div class="ttdeci">void get_external_block()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00053">block_scheduler.h:53</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01179">block_scheduler.h:1179</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_aea575b1a04ce4d0e3f23b3e6cb68065e"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aea575b1a04ce4d0e3f23b3e6cb68065e">stxxl::block_scheduler_algorithm_offline_lru_prefetching::shall_be_cleaned</a></div><div class="ttdeci">bool shall_be_cleaned(const scheduled_blocks_iterator &amp;schedule_meta) const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01445">block_scheduler.h:1445</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a717d73d136e3f0750da1942cdbe97f5b"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a717d73d136e3f0750da1942cdbe97f5b">stxxl::block_scheduler::bm</a></div><div class="ttdeci">block_manager * bm</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00315">block_scheduler.h:315</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a85ebfd32bf189da3e5d016cd7f455dc7"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a85ebfd32bf189da3e5d016cd7f455dc7">stxxl::block_scheduler::max_internal_blocks</a></div><div class="ttdeci">const int_type max_internal_blocks</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00304">block_scheduler.h:304</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a3cf1f79fd43030b888270606a3eb1a7d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3cf1f79fd43030b888270606a3eb1a7d">stxxl::block_scheduler_algorithm_online_lru::internal_block_type</a></div><div class="ttdeci">block_scheduler_type::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00590">block_scheduler.h:590</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a098d5c3d955ab11113a02002d9071029"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a098d5c3d955ab11113a02002d9071029">stxxl::block_scheduler::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00497">block_scheduler.h:497</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_ab7364ccefa441a659383091166875ff8"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7364ccefa441a659383091166875ff8">stxxl::block_scheduler_algorithm_offline_lfd::acquire</a></div><div class="ttdeci">virtual internal_block_type &amp; acquire(const swappable_block_identifier_type sbid, const bool uninitialized=false)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01025">block_scheduler.h:1025</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_afa498843473a660c6fe83b53c005c060"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#afa498843473a660c6fe83b53c005c060">stxxl::block_scheduler_algorithm_offline_lru_prefetching::schedule_next_operations</a></div><div class="ttdeci">void schedule_next_operations()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01503">block_scheduler.h:1503</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a27a46bd0d8b1a5e66e323a634567925f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a27a46bd0d8b1a5e66e323a634567925f">stxxl::block_scheduler_algorithm_simulation::swappable_blocks_resize</a></div><div class="ttdeci">virtual void swappable_blocks_resize(swappable_block_identifier_type size)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00862">block_scheduler.h:862</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a0d8f32715698e5b6ad7c54e5f2942c38"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a0d8f32715698e5b6ad7c54e5f2942c38">stxxl::block_scheduler::get_internal_block</a></div><div class="ttdeci">internal_block_type &amp; get_internal_block(const swappable_block_identifier_type sbid) const </div><div class="ttdoc">Get a const reference to given block&amp;#39;s data. Block has to be already acquired. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00438">block_scheduler.h:438</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a0f06a033d47d9762f88e736d8ae4a3b0"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a0f06a033d47d9762f88e736d8ae4a3b0">stxxl::block_scheduler::is_initialized</a></div><div class="ttdeci">bool is_initialized(const swappable_block_identifier_type sbid) const </div><div class="ttdoc">check if the swappable_block is initialized. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00428">block_scheduler.h:428</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a4704994e6a55bddab50f2b7b36f31c58"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a4704994e6a55bddab50f2b7b36f31c58">stxxl::block_scheduler::free_swappable_block</a></div><div class="ttdeci">void free_swappable_block(const swappable_block_identifier_type sbid)</div><div class="ttdoc">Free given no longer used temporary swappable_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00464">block_scheduler.h:464</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_ae364f773e92242c5e1f3f22908760c38"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ae364f773e92242c5e1f3f22908760c38">stxxl::block_scheduler_algorithm_online_lru::initialize</a></div><div class="ttdeci">virtual void initialize(swappable_block_identifier_type sbid, external_block_type eblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00713">block_scheduler.h:713</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a2e3d0a4ecc042150e333f1325edd5ddb"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a2e3d0a4ecc042150e333f1325edd5ddb">stxxl::block_scheduler_algorithm::is_initialized</a></div><div class="ttdeci">virtual bool is_initialized(const swappable_block_identifier_type sbid) const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00573">block_scheduler.h:573</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a6b5abc58de7641a80f9395176a68cd3d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6b5abc58de7641a80f9395176a68cd3d">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_scheduled_blocks_type</a></div><div class="ttdeci">std::map&lt; swappable_block_identifier_type, write_read_request * &gt; write_scheduled_blocks_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01141">block_scheduler.h:1141</a></div></div>
<div class="ttc" id="classstxxl_1_1completion__handler_html"><div class="ttname"><a href="classstxxl_1_1completion__handler.html">stxxl::completion_handler</a></div><div class="ttdoc">Completion handler class (Loki-style). </div><div class="ttdef"><b>Definition:</b> <a href="completion__handler_8h_source.html#l00061">completion_handler.h:61</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a65ffec64d617c8de01a76d5ce2f4f128"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a65ffec64d617c8de01a76d5ce2f4f128">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_blocks</a></div><div class="ttdeci">scheduled_blocks_type scheduled_blocks</div><div class="ttdoc">Holds not internal swappable_blocks, whose next access has already been scheduled. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01199">block_scheduler.h:1199</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664">stxxl::block_scheduler::block_scheduler_operation</a></div><div class="ttdeci">block_scheduler_operation</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00275">block_scheduler.h:275</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a0b0bcc605dcb7a9f5d206e54c516ebf0"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0b0bcc605dcb7a9f5d206e54c516ebf0">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_blocks_reference</a></div><div class="ttdeci">scheduled_blocks_type::reference scheduled_blocks_reference</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01140">block_scheduler.h:1140</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler_1_1prediction__sequence__element_html_ab3b4181105fd8918f0bcd5ba84bbc2e1"><div class="ttname"><a href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ab3b4181105fd8918f0bcd5ba84bbc2e1">stxxl::block_scheduler::prediction_sequence_element::id</a></div><div class="ttdeci">swappable_block_identifier_type id</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00289">block_scheduler.h:289</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a5e8d47d9b7ede49e71c603ebc53c34c0"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a5e8d47d9b7ede49e71c603ebc53c34c0">stxxl::block_scheduler_algorithm::get_free_internal_block_from_block_scheduler</a></div><div class="ttdeci">internal_block_type * get_free_internal_block_from_block_scheduler()</div><div class="ttdoc">Get an internal_block from the block_scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00543">block_scheduler.h:543</a></div></div>
<div class="ttc" id="classstxxl_1_1block__manager_html"><div class="ttname"><a href="classstxxl_1_1block__manager.html">stxxl::block_manager</a></div><div class="ttdoc">Block manager class. </div><div class="ttdef"><b>Definition:</b> <a href="block__manager_8h_source.html#l00061">block_manager.h:61</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_ab0dc5bdef851f303c2f78b2996f5f16a"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#ab0dc5bdef851f303c2f78b2996f5f16a">stxxl::block_scheduler::deinitialize</a></div><div class="ttdeci">void deinitialize(const swappable_block_identifier_type sbid)</div><div class="ttdoc">Drop all data in the given block, freeing in- and external memory. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00406">block_scheduler.h:406</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_aab2a7b3d623a4261bb71ed5c34b77f86"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#aab2a7b3d623a4261bb71ed5c34b77f86">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::block_to_start_read</a></div><div class="ttdeci">swappable_blocks_iterator block_to_start_read</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01156">block_scheduler.h:1156</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a373b104eee2e285bdc70ff4af8aaca62"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a373b104eee2e285bdc70ff4af8aaca62">stxxl::swappable_block::external_data</a></div><div class="ttdeci">external_block_type external_data</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00046">block_scheduler.h:46</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a75418084f8f87582c74a26054ce810f5"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a75418084f8f87582c74a26054ce810f5">stxxl::block_scheduler_algorithm_simulation::block_scheduler_algorithm_type</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; block_scheduler_algorithm_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00736">block_scheduler.h:736</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_af4d388624ea9ade69a35824fde2050cf"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af4d388624ea9ade69a35824fde2050cf">stxxl::block_scheduler_algorithm_simulation::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00760">block_scheduler.h:760</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a240fb311c2073cc91a2061f259528644"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a240fb311c2073cc91a2061f259528644">stxxl::block_scheduler_algorithm::swappable_block_identifier_type</a></div><div class="ttdeci">block_scheduler_type::swappable_block_identifier_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00527">block_scheduler.h:527</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_a08acb5dd0cb1026410f73597243a56f0"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a08acb5dd0cb1026410f73597243a56f0">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::write_read_request</a></div><div class="ttdeci">write_read_request()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01160">block_scheduler.h:1160</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a1bc09400046b9b62d7977f4dff5e442c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1bc09400046b9b62d7977f4dff5e442c">stxxl::block_scheduler_algorithm_simulation::initialize</a></div><div class="ttdeci">virtual void initialize(swappable_block_identifier_type sbid, external_block_type)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00845">block_scheduler.h:845</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_af1addb8326219fbdbd6d6d8b1a2703f0"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#af1addb8326219fbdbd6d6d8b1a2703f0">stxxl::block_scheduler::internal_block_type</a></div><div class="ttdeci">SwappableBlockType::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00260">block_scheduler.h:260</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_abd833d141e9c484946ae6e021488996d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abd833d141e9c484946ae6e021488996d">stxxl::block_scheduler_algorithm_simulation::swappable_block_identifier_type</a></div><div class="ttdeci">block_scheduler_type::swappable_block_identifier_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00739">block_scheduler.h:739</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664ad697af9600f8b027fbeed11d312f8683"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ad697af9600f8b027fbeed11d312f8683">stxxl::block_scheduler::op_initialize</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00282">block_scheduler.h:282</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a480224f1272cd6517c6df5a8102e6265"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a480224f1272cd6517c6df5a8102e6265">stxxl::block_scheduler_algorithm::is_simulating</a></div><div class="ttdeci">virtual bool is_simulating() const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00577">block_scheduler.h:577</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ab2f420a0d01eb38fb1b7b0f7c0265e73"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab2f420a0d01eb38fb1b7b0f7c0265e73">stxxl::block_scheduler_algorithm_offline_lru_prefetching::get_ready_block</a></div><div class="ttdeci">internal_block_type * get_ready_block(const scheduled_blocks_iterator &amp;schedule_meta)</div><div class="ttdoc">Wait for the write of the giver to finish and return reserved internal_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01410">block_scheduler.h:1410</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_aebd66f09b9a364eb65434f5d659e8194"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#aebd66f09b9a364eb65434f5d659e8194">stxxl::block_scheduler::internal_blocks_blocks</a></div><div class="ttdeci">std::stack&lt; internal_block_type * &gt; internal_blocks_blocks</div><div class="ttdoc">Stores pointers to arrays of internal_blocks. Used to deallocate them only. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00307">block_scheduler.h:307</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a0adb0601b30d381eaba0efa45d8189b0"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a0adb0601b30d381eaba0efa45d8189b0">stxxl::block_scheduler_algorithm_offline_lfd::block_scheduler_algorithm_type</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; block_scheduler_algorithm_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00885">block_scheduler.h:885</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_ace34d8adc61d90a10e19a50a5a625627"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ace34d8adc61d90a10e19a50a5a625627">stxxl::block_scheduler_algorithm_offline_lfd::next_use</a></div><div class="ttdeci">std::deque&lt; std::pair&lt; bool, time_type &gt; &gt; next_use</div><div class="ttdoc">Stores for the sequence of releases extracted from the prediction_sequence: (true, timestamp of the blocks next acquire) if it is acquired next (false, 0) if it is deinitialized next (false, 1) if it is not accessed any more (false, 2) if it is extracted next (false, 3) if it is initialized next. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00939">block_scheduler.h:939</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a093046b4f690605dba90e794ec153bbd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a093046b4f690605dba90e794ec153bbd">stxxl::block_scheduler_algorithm_offline_lru_prefetching::block_scheduler_algorithm_offline_lru_prefetching</a></div><div class="ttdeci">block_scheduler_algorithm_offline_lru_prefetching(block_scheduler_algorithm_type *old)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01634">block_scheduler.h:1634</a></div></div>
<div class="ttc" id="namespacestxxl_html_a37feb00474dd76f7dfc8fc5352123a34"><div class="ttname"><a href="namespacestxxl.html#a37feb00474dd76f7dfc8fc5352123a34">stxxl::pop_begin</a></div><div class="ttdeci">Container::value_type pop_begin(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00293">utils.h:293</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_abf6a714d3287e3a7443292b7546112d2"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#abf6a714d3287e3a7443292b7546112d2">stxxl::block_scheduler::initialize</a></div><div class="ttdeci">void initialize(const swappable_block_identifier_type sbid, external_block_type eblock)</div><div class="ttdoc">Initialize the swappable_block with the given external_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00415">block_scheduler.h:415</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a30135baf17dbd6dcf499ae4337d5d1a3"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a30135baf17dbd6dcf499ae4337d5d1a3">stxxl::block_scheduler_algorithm_offline_lfd::block_scheduler_algorithm_offline_lfd</a></div><div class="ttdeci">block_scheduler_algorithm_offline_lfd(block_scheduler_algorithm_type *old)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01003">block_scheduler.h:1003</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a4cf4132c1d683e24e18f68494926598f"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a4cf4132c1d683e24e18f68494926598f">stxxl::swappable_block::read_sync</a></div><div class="ttdeci">void read_sync()</div><div class="ttdoc">Read synchronously from external_block to internal_block. Has to be internal and have an external_blo...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00152">block_scheduler.h:152</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ab80d8412231f82ca654baf00a3bc8b8d"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ab80d8412231f82ca654baf00a3bc8b8d">stxxl::swappable_block::clean_sync</a></div><div class="ttdeci">void clean_sync()</div><div class="ttdoc">Write synchronously from internal_block to external_block if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00171">block_scheduler.h:171</a></div></div>
<div class="ttc" id="classstxxl_1_1addressable__priority__queue_html"><div class="ttname"><a href="classstxxl_1_1addressable__priority__queue.html">stxxl::addressable_priority_queue</a></div><div class="ttdoc">An internal priority queue that allows removing elements addressed with (a copy of) themselves...</div><div class="ttdef"><b>Definition:</b> <a href="addressable__queues_8h_source.html#l00112">addressable_queues.h:112</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_ab7b76072efd97ea017a04d10ff4e7d6d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab7b76072efd97ea017a04d10ff4e7d6d">stxxl::block_scheduler_algorithm_online_lru::get_free_internal_block</a></div><div class="ttdeci">internal_block_type * get_free_internal_block()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00603">block_scheduler.h:603</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_aef43e00f948535cd4f16c3a54e199fae"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#aef43e00f948535cd4f16c3a54e199fae">stxxl::block_scheduler::swappable_blocks</a></div><div class="ttdeci">std::vector&lt; SwappableBlockType &gt; swappable_blocks</div><div class="ttdoc">temporary blocks that will not be needed after algorithm termination. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00311">block_scheduler.h:311</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a06bca62c688dba9f7f1a61d941a0e240"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a06bca62c688dba9f7f1a61d941a0e240">stxxl::block_scheduler_algorithm_simulation::reference_counts</a></div><div class="ttdeci">std::vector&lt; int_type &gt; reference_counts</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00754">block_scheduler.h:754</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a383fd0ba9b29e6a5062f2db2e2e63459"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a383fd0ba9b29e6a5062f2db2e2e63459">stxxl::block_scheduler_algorithm_offline_lru_prefetching::init</a></div><div class="ttdeci">void init(block_scheduler_algorithm_type *old_algo)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01587">block_scheduler.h:1587</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a00d1967e1c4a6cd35baadaff303ab9af"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a00d1967e1c4a6cd35baadaff303ab9af">stxxl::block_scheduler_algorithm_simulation::is_simulating</a></div><div class="ttdeci">virtual bool is_simulating() const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00875">block_scheduler.h:875</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a2c5049ccc0860cb3438236362e1b7ff5"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a2c5049ccc0860cb3438236362e1b7ff5">stxxl::block_scheduler::explicit_timestep</a></div><div class="ttdeci">void explicit_timestep()</div><div class="ttdoc">Record a timestep in the prediction sequence to seperate consecutive acquire rsp. release-operations...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00433">block_scheduler.h:433</a></div></div>
<div class="ttc" id="uint__types_8h_html_a969c1286bbe8eeb8811dac7a462d4a78"><div class="ttname"><a href="uint__types_8h.html#a969c1286bbe8eeb8811dac7a462d4a78">min</a></div><div class="ttdeci">static uint_pair min()</div><div class="ttdoc">return an uint_pair instance containing the smallest value possible </div><div class="ttdef"><b>Definition:</b> <a href="uint__types_8h_source.html#l00234">uint_types.h:234</a></div></div>
<div class="ttc" id="classstxxl_1_1counting__ptr_html"><div class="ttname"><a href="classstxxl_1_1counting__ptr.html">stxxl::counting_ptr&lt; request &gt;</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a62251147442fff8596645fd5ff6ce264"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a62251147442fff8596645fd5ff6ce264">stxxl::block_scheduler_algorithm_offline_lfd::evictable_blocks_empty</a></div><div class="ttdeci">virtual bool evictable_blocks_empty()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01019">block_scheduler.h:1019</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_aa6fe3fe393b4c29705588f758054c0cb"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#aa6fe3fe393b4c29705588f758054c0cb">stxxl::swappable_block::read_async</a></div><div class="ttdeci">request_ptr read_async(completion_handler on_cmpl=completion_handler())</div><div class="ttdoc">Read asyncronusly from external_block to internal_block. Has to be internal and have an external_bloc...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00140">block_scheduler.h:140</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_aaa52d0f74a6fd44024e1009303bb1fb7"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#aaa52d0f74a6fd44024e1009303bb1fb7">stxxl::swappable_block::has_external_block</a></div><div class="ttdeci">bool has_external_block() const </div><div class="ttdoc">If it has an external_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00078">block_scheduler.h:78</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a0f34666b86baf37cf5100fb276a1ef27"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a0f34666b86baf37cf5100fb276a1ef27">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_blocks_iterator</a></div><div class="ttdeci">scheduled_blocks_type::iterator scheduled_blocks_iterator</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01139">block_scheduler.h:1139</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a73c8c3fac495624d3764069b98f7cf18"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a73c8c3fac495624d3764069b98f7cf18">stxxl::block_scheduler_algorithm_online_lru::~block_scheduler_algorithm_online_lru</a></div><div class="ttdeci">virtual ~block_scheduler_algorithm_online_lru()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00632">block_scheduler.h:632</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a2f7628d155e8a8188a7e11bff3e7bdde"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a2f7628d155e8a8188a7e11bff3e7bdde">stxxl::block_scheduler::max_internal_blocks_alloc_at_once</a></div><div class="ttdeci">static const int_type max_internal_blocks_alloc_at_once</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00255">block_scheduler.h:255</a></div></div>
<div class="ttc" id="block__manager_8h_html"><div class="ttname"><a href="block__manager_8h.html">block_manager.h</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a059c06470d1069faf1806c96f36c1fda"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a059c06470d1069faf1806c96f36c1fda">stxxl::block_scheduler_algorithm::get_prediction_sequence</a></div><div class="ttdeci">virtual const prediction_sequence_type &amp; get_prediction_sequence() const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00579">block_scheduler.h:579</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a656de54faeb04d4966cf5de1b2ce892f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a656de54faeb04d4966cf5de1b2ce892f">stxxl::block_scheduler_algorithm_online_lru::block_scheduler_algorithm_online_lru</a></div><div class="ttdeci">block_scheduler_algorithm_online_lru(block_scheduler_algorithm_type *old)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00628">block_scheduler.h:628</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a9cded2f42281427567bf1c9b4d5edfd2"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a9cded2f42281427567bf1c9b4d5edfd2">stxxl::swappable_block::internal_data</a></div><div class="ttdeci">internal_block_type * internal_data</div><div class="ttdoc">external_data.valid if no associated space on disk </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00047">block_scheduler.h:47</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a085807eedd6cd7d6092b7731b395ae9f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a085807eedd6cd7d6092b7731b395ae9f">stxxl::block_scheduler_algorithm::prediction_sequence</a></div><div class="ttdeci">prediction_sequence_type prediction_sequence</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00536">block_scheduler.h:536</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_ab7b7626e9e94267a4bd76b846f7dec7c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab7b7626e9e94267a4bd76b846f7dec7c">stxxl::block_scheduler_algorithm_offline_lfd::block_scheduler_algorithm_offline_lfd</a></div><div class="ttdeci">block_scheduler_algorithm_offline_lfd(block_scheduler_type &amp;bs)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00998">block_scheduler.h:998</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a3180e74d6cfa77838173cf757c20b197"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a3180e74d6cfa77838173cf757c20b197">stxxl::block_scheduler_algorithm::time_type</a></div><div class="ttdeci">block_scheduler_type::time_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00529">block_scheduler.h:529</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a117098214cb91f41f8eb6854bcc898d0"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a117098214cb91f41f8eb6854bcc898d0">stxxl::block_scheduler_algorithm::prediction_sequence_type</a></div><div class="ttdeci">block_scheduler_type::prediction_sequence_type prediction_sequence_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00528">block_scheduler.h:528</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_ab1f18ba1e1bfe630b81faae824f043b9"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ab1f18ba1e1bfe630b81faae824f043b9">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::write_done_soon</a></div><div class="ttdeci">bool write_done_soon</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01154">block_scheduler.h:1154</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html"><div class="ttname"><a href="classstxxl_1_1swappable__block.html">stxxl::swappable_block</a></div><div class="ttdoc">Virtualization of a block of data. Holds information for allocating and swapping. To use in cooperati...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00036">block_scheduler.h:36</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a30f586fea926d71869e8938464c4c18a"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a30f586fea926d71869e8938464c4c18a">stxxl::block_scheduler_algorithm_offline_lru_prefetching::extract_external_block</a></div><div class="ttdeci">virtual external_block_type extract_external_block(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01825">block_scheduler.h:1825</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a2090e5622c587af102d59042e7843b23"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2090e5622c587af102d59042e7843b23">stxxl::block_scheduler_algorithm_simulation::time_count</a></div><div class="ttdeci">time_type time_count</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00752">block_scheduler.h:752</a></div></div>
<div class="ttc" id="classstxxl_1_1counting__ptr_html_ae98580df566429cf4ba322a0f8ef20c7"><div class="ttname"><a href="classstxxl_1_1counting__ptr.html#ae98580df566429cf4ba322a0f8ef20c7">stxxl::counting_ptr::valid</a></div><div class="ttdeci">bool valid() const </div><div class="ttdoc">test for a non-NULL pointer </div><div class="ttdef"><b>Definition:</b> <a href="counting__ptr_8h_source.html#l00138">counting_ptr.h:138</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a79cdf18e51ac05233722db67a31b369b"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a79cdf18e51ac05233722db67a31b369b">stxxl::block_scheduler::is_simulating</a></div><div class="ttdeci">bool is_simulating() const </div><div class="ttdoc">Returns if simulation mode is on, i.e. if a prediction sequence is being recorded. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00472">block_scheduler.h:472</a></div></div>
<div class="ttc" id="addressable__queues_8h_html"><div class="ttname"><a href="addressable__queues_8h.html">addressable_queues.h</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_ab279053f8615be69fac23784fc7e3adb"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab279053f8615be69fac23784fc7e3adb">stxxl::block_scheduler_algorithm_offline_lfd::block_scheduler_type</a></div><div class="ttdeci">block_scheduler&lt; SwappableBlockType &gt; block_scheduler_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00884">block_scheduler.h:884</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a41eb3ddfbe35e8528b9dae4bf62a9bc0"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a41eb3ddfbe35e8528b9dae4bf62a9bc0">stxxl::block_scheduler_algorithm_simulation::evictable_blocks</a></div><div class="ttdeci">std::stack&lt; swappable_block_identifier_type &gt; evictable_blocks</div><div class="ttdoc">Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00751">block_scheduler.h:751</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html">stxxl::block_scheduler_algorithm_offline_lru_prefetching</a></div><div class="ttdoc">Block scheduling algorithm caching via the least recently used policy (offline), and prefetching in a...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01122">block_scheduler.h:1122</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a24874fce2f6b3e840f8d372ca6b196ef"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a24874fce2f6b3e840f8d372ca6b196ef">stxxl::swappable_block::external_block_type</a></div><div class="ttdeci">internal_block_type::bid_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00043">block_scheduler.h:43</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_aa6fecd166011788fe849280769a657d6"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aa6fecd166011788fe849280769a657d6">stxxl::block_scheduler_algorithm_offline_lfd::release</a></div><div class="ttdeci">virtual void release(swappable_block_identifier_type sbid, const bool dirty)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01063">block_scheduler.h:1063</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a687fffdad96cf8a7b0eb35d0a423888c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a687fffdad96cf8a7b0eb35d0a423888c">stxxl::block_scheduler_algorithm_offline_lru_prefetching::next_op_to_schedule</a></div><div class="ttdeci">prediction_sequence_type::iterator next_op_to_schedule</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01203">block_scheduler.h:1203</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_aad8d519c7198de4cfb52d51b760e4140"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aad8d519c7198de4cfb52d51b760e4140">stxxl::block_scheduler_algorithm_offline_lfd::return_free_internal_block</a></div><div class="ttdeci">void return_free_internal_block(internal_block_type *iblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00951">block_scheduler.h:951</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html_a7fce2e1371a6b3a01f5ac8c44a3079ba"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a7fce2e1371a6b3a01f5ac8c44a3079ba">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta::giver</a></div><div class="ttdeci">std::pair&lt; bool, swappable_block_identifier_type &gt; giver</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01182">block_scheduler.h:1182</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a47773f2914fb0803486abe09aed22fb7"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a47773f2914fb0803486abe09aed22fb7">stxxl::block_scheduler_algorithm_online_lru::block_scheduler_type</a></div><div class="ttdeci">block_scheduler&lt; SwappableBlockType &gt; block_scheduler_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00588">block_scheduler.h:588</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority_html_a366df2df73202aa3e346bf9903444f8d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a366df2df73202aa3e346bf9903444f8d">stxxl::block_scheduler_algorithm_offline_lfd::priority::p</a></div><div class="ttdeci">unsigned_type p</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00900">block_scheduler.h:900</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a872bfc0e183fea986915afa967107adc"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a872bfc0e183fea986915afa967107adc">stxxl::swappable_block::deinitialize</a></div><div class="ttdeci">internal_block_type * deinitialize()</div><div class="ttdoc">Bring the block in uninitialized state, freeing external and internal memory. Returns a pointer to th...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00199">block_scheduler.h:199</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_a889e827b0e5ee3db354b2af40a648730"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#a889e827b0e5ee3db354b2af40a648730">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::shall_read</a></div><div class="ttdeci">bool shall_read</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01155">block_scheduler.h:1155</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html_a312076c67ac919f9f38c68145abcdf4f"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a312076c67ac919f9f38c68145abcdf4f">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta::scheduled_block_meta</a></div><div class="ttdeci">scheduled_block_meta(block_scheduler_operation op)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01186">block_scheduler.h:1186</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_aff36a529415f519022fed79e8d509415"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#aff36a529415f519022fed79e8d509415">stxxl::swappable_block::initialize</a></div><div class="ttdeci">void initialize(external_block_type eblock)</div><div class="ttdoc">Set the external_block that holds the swappable_block&amp;#39;s data. The block gets initialized with it...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00214">block_scheduler.h:214</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_af48fadc3a80fdc3fa4ecf9fb0131687c"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#af48fadc3a80fdc3fa4ecf9fb0131687c">stxxl::swappable_block::free_external_block</a></div><div class="ttdeci">void free_external_block()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00056">block_scheduler.h:56</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html">stxxl::block_scheduler_algorithm_online_lru</a></div><div class="ttdoc">Block scheduling algorithm caching via the least recently used policy (online). </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00238">block_scheduler.h:238</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a1950fefd878efe49b4e1e02a34dd5c30"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1950fefd878efe49b4e1e02a34dd5c30">stxxl::block_scheduler_algorithm_simulation::deinitialize</a></div><div class="ttdeci">virtual void deinitialize(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00837">block_scheduler.h:837</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ac8883ff92c9b6368427ffe6d89ce8536"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ac8883ff92c9b6368427ffe6d89ce8536">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_scheduled_blocks_iterator</a></div><div class="ttdeci">write_scheduled_blocks_type::iterator write_scheduled_blocks_iterator</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01142">block_scheduler.h:1142</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write_html"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html">stxxl::block_scheduler_algorithm_offline_lru_prefetching::read_after_write</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01164">block_scheduler.h:1164</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_acab490ad749463564cef5105f880eb1d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#acab490ad749463564cef5105f880eb1d">stxxl::block_scheduler_algorithm_offline_lfd::init</a></div><div class="ttdeci">void init(block_scheduler_algorithm_type *old_algo)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00954">block_scheduler.h:954</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html_a8f6164b9b834e9e68ea8c16d11716d34"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#a8f6164b9b834e9e68ea8c16d11716d34">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta::read_req</a></div><div class="ttdeci">request_ptr read_req</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01183">block_scheduler.h:1183</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a3efd0ff39461bc6115c7d95a2bc56219"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a3efd0ff39461bc6115c7d95a2bc56219">stxxl::block_scheduler_algorithm::get_algorithm_from_block_scheduler</a></div><div class="ttdeci">block_scheduler_algorithm * get_algorithm_from_block_scheduler()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00538">block_scheduler.h:538</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a3e04b494c1abcc1168053e59b92b1de6"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a3e04b494c1abcc1168053e59b92b1de6">stxxl::block_scheduler_algorithm_offline_lfd::external_block_type</a></div><div class="ttdeci">block_scheduler_type::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00887">block_scheduler.h:887</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a61d55f31ba1e9a6d65671567cb172b8c"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a61d55f31ba1e9a6d65671567cb172b8c">stxxl::block_scheduler::external_block_type</a></div><div class="ttdeci">SwappableBlockType::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00261">block_scheduler.h:261</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html_aebbfef184dec944facdbc14952a36515"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#aebbfef184dec944facdbc14952a36515">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta::reserved_iblock</a></div><div class="ttdeci">internal_block_type * reserved_iblock</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01181">block_scheduler.h:1181</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ab6bbb4e1ef54d3bf36dea3e7d2ff2894"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ab6bbb4e1ef54d3bf36dea3e7d2ff2894">stxxl::swappable_block::is_initialized</a></div><div class="ttdeci">bool is_initialized() const </div><div class="ttdoc">If it has some valid data (in- or external). </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00094">block_scheduler.h:94</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a39a9df58d9dce3abcd309ccd70c84309"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a39a9df58d9dce3abcd309ccd70c84309">stxxl::block_scheduler_algorithm_offline_lru_prefetching::time_type</a></div><div class="ttdeci">block_scheduler_algorithm_type::time_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01133">block_scheduler.h:1133</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a58ccfaa5ad80162e7a298afb866fe3b7"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a58ccfaa5ad80162e7a298afb866fe3b7">stxxl::block_scheduler_algorithm_simulation::~block_scheduler_algorithm_simulation</a></div><div class="ttdeci">virtual ~block_scheduler_algorithm_simulation()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00784">block_scheduler.h:784</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_ab63f83b9405ac02f385cdbefe50cd8c4"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#ab63f83b9405ac02f385cdbefe50cd8c4">stxxl::block_scheduler_algorithm_online_lru::release</a></div><div class="ttdeci">virtual void release(swappable_block_identifier_type sbid, const bool dirty)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00688">block_scheduler.h:688</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_ab884d9e51c35597533d82762ba4184f2"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#ab884d9e51c35597533d82762ba4184f2">stxxl::block_scheduler_algorithm_offline_lfd::prediction_sequence_type</a></div><div class="ttdeci">block_scheduler_type::prediction_sequence_type prediction_sequence_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00890">block_scheduler.h:890</a></div></div>
<div class="ttc" id="stack_html"><div class="ttname"><a href="stack.html">stack</a></div></div>
<div class="ttc" id="classstxxl_1_1typed__block_html"><div class="ttname"><a href="classstxxl_1_1typed__block.html">stxxl::typed_block</a></div><div class="ttdoc">Block containing elements of fixed length. </div><div class="ttdef"><b>Definition:</b> <a href="typed__block_8h_source.html#l00237">typed_block.h:237</a></div></div>
<div class="ttc" id="group__reqlayer_html_ga7f6ac626252081b4d28528770f32a19e"><div class="ttname"><a href="group__reqlayer.html#ga7f6ac626252081b4d28528770f32a19e">stxxl::request_ptr</a></div><div class="ttdeci">counting_ptr&lt; request &gt; request_ptr</div><div class="ttdoc">A reference counting pointer for request. </div><div class="ttdef"><b>Definition:</b> <a href="request_8h_source.html#l00113">request.h:113</a></div></div>
<div class="ttc" id="classstxxl_1_1request__interface_html_ac740c3dd58d02842bed4a4e86fe42b22"><div class="ttname"><a href="classstxxl_1_1request__interface.html#ac740c3dd58d02842bed4a4e86fe42b22">stxxl::request_interface::wait</a></div><div class="ttdeci">virtual void wait(bool measure_time=true)=0</div><div class="ttdoc">Suspends calling thread until completion of the request. </div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_ad093942c7d6451117fb350b19c093ab0"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#ad093942c7d6451117fb350b19c093ab0">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::taker</a></div><div class="ttdeci">scheduled_blocks_iterator taker</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01157">block_scheduler.h:1157</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a40b073080ca8ae2c475bc3550829da5a"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a40b073080ca8ae2c475bc3550829da5a">stxxl::block_scheduler_algorithm_offline_lfd::initialize</a></div><div class="ttdeci">virtual void initialize(swappable_block_identifier_type sbid, external_block_type eblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01102">block_scheduler.h:1102</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a3ee9c52371b779e5e32298dfc6ad7242"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a3ee9c52371b779e5e32298dfc6ad7242">stxxl::block_scheduler_algorithm_simulation::external_block_type</a></div><div class="ttdeci">block_scheduler_type::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00738">block_scheduler.h:738</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a8857ae641dbe14bbb6ff671353805c99"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a8857ae641dbe14bbb6ff671353805c99">stxxl::swappable_block::acquire</a></div><div class="ttdeci">internal_block_type &amp; acquire()</div><div class="ttdoc">Acquire the block, i.e. add a reference. Has to be internal. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00107">block_scheduler.h:107</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a73a060aaceb3857fa9a02cd5e712b650"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a73a060aaceb3857fa9a02cd5e712b650">stxxl::block_scheduler_algorithm::~block_scheduler_algorithm</a></div><div class="ttdeci">virtual ~block_scheduler_algorithm()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00561">block_scheduler.h:561</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_aa91aa3b3e5f02d504a49d0aecf9ce865"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aa91aa3b3e5f02d504a49d0aecf9ce865">stxxl::block_scheduler_algorithm_offline_lru_prefetching::operation_done</a></div><div class="ttdeci">void operation_done(scheduled_blocks_iterator &amp;schedule_meta)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01479">block_scheduler.h:1479</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a33dda105dddbbe4a0360c4e66ba598d4"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a33dda105dddbbe4a0360c4e66ba598d4">stxxl::block_scheduler_algorithm_offline_lru_prefetching::acquire</a></div><div class="ttdeci">virtual internal_block_type &amp; acquire(const swappable_block_identifier_type sbid, const bool uninitialized=false)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01660">block_scheduler.h:1660</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_ac8b03b6abc63cd9a106f254eb4d02eed"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac8b03b6abc63cd9a106f254eb4d02eed">stxxl::block_scheduler_algorithm_simulation::block_scheduler_algorithm_simulation</a></div><div class="ttdeci">block_scheduler_algorithm_simulation(block_scheduler_algorithm_type *old)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00777">block_scheduler.h:777</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a1e20478d2f67a74b0fac59d490914ab1"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1e20478d2f67a74b0fac59d490914ab1">stxxl::block_scheduler_algorithm_simulation::is_initialized</a></div><div class="ttdeci">virtual bool is_initialized(const swappable_block_identifier_type sbid) const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00867">block_scheduler.h:867</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a3fbf29e3baff0d26f666e11a015bf36f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a3fbf29e3baff0d26f666e11a015bf36f">stxxl::block_scheduler_algorithm_online_lru::extract_external_block</a></div><div class="ttdeci">virtual external_block_type extract_external_block(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00719">block_scheduler.h:719</a></div></div>
<div class="ttc" id="namespacestxxl_html_add6239ebaf3d1e03a054aee6f1fd52d2"><div class="ttname"><a href="namespacestxxl.html#add6239ebaf3d1e03a054aee6f1fd52d2">stxxl::int_type</a></div><div class="ttdeci">choose_int_types&lt; my_pointer_size &gt;::int_type int_type</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00063">types.h:63</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a97b8770056b82dd74e229274f98dac6d"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a97b8770056b82dd74e229274f98dac6d">stxxl::block_scheduler::free_swappable_blocks</a></div><div class="ttdeci">std::priority_queue&lt; swappable_block_identifier_type, std::vector&lt; swappable_block_identifier_type &gt;, std::greater&lt; swappable_block_identifier_type &gt; &gt; free_swappable_blocks</div><div class="ttdoc">holds indices of free swappable_blocks with attributes reset. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00314">block_scheduler.h:314</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ae2642e905b85db5ab484cfd76503a706"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae2642e905b85db5ab484cfd76503a706">stxxl::block_scheduler_algorithm_offline_lru_prefetching::try_interrupt_read</a></div><div class="ttdeci">bool try_interrupt_read(const write_scheduled_blocks_iterator &amp;writing_block)</div><div class="ttdoc">Try to interrupt a read scheduled in a write_read_request. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01232">block_scheduler.h:1232</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a70b0be0df2deb05341b1dd9b7d64ee74"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70b0be0df2deb05341b1dd9b7d64ee74">stxxl::block_scheduler_algorithm_offline_lru_prefetching::shall_be_read</a></div><div class="ttdeci">bool shall_be_read(const scheduled_blocks_iterator &amp;schedule_meta, const bool ignore_first=true) const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01471">block_scheduler.h:1471</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664ab7ec0872e5cd3eb0455a3a73a2d4ba23"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664ab7ec0872e5cd3eb0455a3a73a2d4ba23">stxxl::block_scheduler::op_release_dirty</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00280">block_scheduler.h:280</a></div></div>
<div class="ttc" id="structstxxl_1_1BID_html"><div class="ttname"><a href="structstxxl_1_1BID.html">stxxl::BID&lt; raw_size &gt;</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a688d2d348f5e023f2ffa2dfd503e3767"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a688d2d348f5e023f2ffa2dfd503e3767">stxxl::block_scheduler_algorithm::external_block_type</a></div><div class="ttdeci">block_scheduler_type::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00526">block_scheduler.h:526</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ab962d3ae69fcac58f9b9e1ad6d131011"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab962d3ae69fcac58f9b9e1ad6d131011">stxxl::block_scheduler_algorithm_offline_lru_prefetching::initialize</a></div><div class="ttdeci">virtual void initialize(swappable_block_identifier_type sbid, external_block_type eblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01803">block_scheduler.h:1803</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a65e2a45dfa2cc529bd09f165dd849c24"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a65e2a45dfa2cc529bd09f165dd849c24">stxxl::block_scheduler::get_free_internal_block</a></div><div class="ttdeci">internal_block_type * get_free_internal_block()</div><div class="ttdoc">Get an internal_block from the freelist or a newly allocated one if available. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00320">block_scheduler.h:320</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_ae0821c64b3d08fc2919de8d7eb48a79e"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae0821c64b3d08fc2919de8d7eb48a79e">stxxl::block_scheduler_algorithm_simulation::block_scheduler_type</a></div><div class="ttdeci">block_scheduler&lt; SwappableBlockType &gt; block_scheduler_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00735">block_scheduler.h:735</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a89d5f7af1d55a43e48e91c6ea2acedd5"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a89d5f7af1d55a43e48e91c6ea2acedd5">stxxl::block_scheduler_algorithm_online_lru::deinitialize</a></div><div class="ttdeci">virtual void deinitialize(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00704">block_scheduler.h:704</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a17536c2736c800c74aa76454272f77ad"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a17536c2736c800c74aa76454272f77ad">stxxl::swappable_block::is_acquired</a></div><div class="ttdeci">bool is_acquired() const </div><div class="ttdoc">If it is acquired. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00086">block_scheduler.h:86</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a1bd6b8c9648e7ff801a69d9fb65cbb71"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a1bd6b8c9648e7ff801a69d9fb65cbb71">stxxl::block_scheduler::remaining_internal_blocks</a></div><div class="ttdeci">int_type remaining_internal_blocks</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00305">block_scheduler.h:305</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a279eadcb0640d67a57e0131440615516"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a279eadcb0640d67a57e0131440615516">stxxl::block_scheduler_algorithm_offline_lfd::evictable_blocks</a></div><div class="ttdeci">addressable_priority_queue&lt; swappable_block_identifier_type, priority &gt; evictable_blocks</div><div class="ttdoc">Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00930">block_scheduler.h:930</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta_html_acc35dd3fe63531c3dc2470d07dab7be7"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1scheduled__block__meta.html#acc35dd3fe63531c3dc2470d07dab7be7">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_block_meta::operations</a></div><div class="ttdeci">std::deque&lt; block_scheduler_operation &gt; operations</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01184">block_scheduler.h:1184</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler_1_1prediction__sequence__element_html_ad38f52b20832924d6c0c40d4a11b5a5f"><div class="ttname"><a href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#ad38f52b20832924d6c0c40d4a11b5a5f">stxxl::block_scheduler::prediction_sequence_element::time</a></div><div class="ttdeci">time_type time</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00290">block_scheduler.h:290</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a1a8742c089815312e6ad6a6ab8b4e66d"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a1a8742c089815312e6ad6a6ab8b4e66d">stxxl::block_scheduler_algorithm_simulation::evictable_blocks_empty</a></div><div class="ttdeci">virtual bool evictable_blocks_empty()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00797">block_scheduler.h:797</a></div></div>
<div class="ttc" id="structstxxl_1_1striping_html"><div class="ttname"><a href="structstxxl_1_1striping.html">stxxl::striping</a></div><div class="ttdoc">Striping disk allocation scheme functor. </div><div class="ttdef"><b>Definition:</b> <a href="block__alloc_8h_source.html#l00041">block_alloc.h:41</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a5c397590ea370480cc01445880da92a2"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a5c397590ea370480cc01445880da92a2">stxxl::block_scheduler::allocate_swappable_block</a></div><div class="ttdeci">swappable_block_identifier_type allocate_swappable_block()</div><div class="ttdoc">Allocate an uninitialized swappable_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00443">block_scheduler.h:443</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_aed962e7b0003b3bec54c3c179d58e4d8"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aed962e7b0003b3bec54c3c179d58e4d8">stxxl::block_scheduler_algorithm_offline_lru_prefetching::free_evictable_blocks</a></div><div class="ttdeci">std::set&lt; swappable_block_identifier_type &gt; free_evictable_blocks</div><div class="ttdoc">Holds swappable blocks, whose internal block can be freed, i.e. that are internal but unacquired...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01195">block_scheduler.h:1195</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_abdaa2ef0512f8fce9f1bc029a3584071"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#abdaa2ef0512f8fce9f1bc029a3584071">stxxl::block_scheduler_algorithm_offline_lru_prefetching::wait_on_write</a></div><div class="ttdeci">void wait_on_write(const write_scheduled_blocks_iterator &amp;writing_block)</div><div class="ttdoc">Wait for the write to finish. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01365">block_scheduler.h:1365</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ae17635581183290bd621e69767d5299e"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae17635581183290bd621e69767d5299e">stxxl::block_scheduler_algorithm_offline_lru_prefetching::external_block_type</a></div><div class="ttdeci">block_scheduler_type::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01131">block_scheduler.h:1131</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html">stxxl::block_scheduler_algorithm_simulation</a></div><div class="ttdoc">Pseudo block scheduling algorithm only recording the request sequence. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00732">block_scheduler.h:732</a></div></div>
<div class="ttc" id="uint__types_8h_html_adbe00c091ebf5a14e00337c9ab07180e"><div class="ttname"><a href="uint__types_8h.html#adbe00c091ebf5a14e00337c9ab07180e">operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const uint_pair &amp;b) const </div><div class="ttdoc">less-than comparison operator </div><div class="ttdef"><b>Definition:</b> <a href="uint__types_8h_source.html#l00204">uint_types.h:204</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a434bbe8bae538a59b5ceff9e57b631c4"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a434bbe8bae538a59b5ceff9e57b631c4">stxxl::block_scheduler_algorithm_simulation::block_scheduler_algorithm_simulation</a></div><div class="ttdeci">block_scheduler_algorithm_simulation(block_scheduler_type &amp;bs)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00770">block_scheduler.h:770</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler_1_1prediction__sequence__element_html_a4168c87ed890d1499c9eaec6bc6d874c"><div class="ttname"><a href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#a4168c87ed890d1499c9eaec6bc6d874c">stxxl::block_scheduler::prediction_sequence_element::op</a></div><div class="ttdeci">block_scheduler_operation op</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00288">block_scheduler.h:288</a></div></div>
<div class="ttc" id="namespace_8h_html_a3a0db882bf107866ded135ce72af6a5f"><div class="ttname"><a href="namespace_8h.html#a3a0db882bf107866ded135ce72af6a5f">STXXL_BEGIN_NAMESPACE</a></div><div class="ttdeci">#define STXXL_BEGIN_NAMESPACE</div><div class="ttdef"><b>Definition:</b> <a href="namespace_8h_source.html#l00016">namespace.h:16</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a05553be98a99d696e17c6c160b86c852"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a05553be98a99d696e17c6c160b86c852">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_scheduled_blocks_reference</a></div><div class="ttdeci">write_scheduled_blocks_type::reference write_scheduled_blocks_reference</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01143">block_scheduler.h:1143</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a3b5ff905d98c086f9b9a76dea9c68ac7"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a3b5ff905d98c086f9b9a76dea9c68ac7">stxxl::block_scheduler::swappable_block_identifier_type</a></div><div class="ttdeci">std::vector&lt; SwappableBlockType &gt;::size_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00262">block_scheduler.h:262</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a28c3c1f91025f102772c30d15e1e856d"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a28c3c1f91025f102772c30d15e1e856d">stxxl::swappable_block::get_internal_block</a></div><div class="ttdeci">const internal_block_type &amp; get_internal_block() const </div><div class="ttdoc">Get a reference to the data-block. Has to be acquired. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00122">block_scheduler.h:122</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write_html_aab7ab93654b9d5344d53b37e17f246f1"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#aab7ab93654b9d5344d53b37e17f246f1">stxxl::block_scheduler_algorithm_offline_lru_prefetching::read_after_write::read_after_write</a></div><div class="ttdeci">read_after_write(write_read_request *write_read_req)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01168">block_scheduler.h:1168</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a6814e7bbadf740386d3df8df3b2d6719"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a6814e7bbadf740386d3df8df3b2d6719">stxxl::block_scheduler::block_scheduler</a></div><div class="ttdeci">block_scheduler(const int_type max_internal_memory)</div><div class="ttdoc">Create a block_scheduler with empty prediction sequence in simple mode. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00354">block_scheduler.h:354</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a933e44586c93fc39ecb1da98204e9afe"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a933e44586c93fc39ecb1da98204e9afe">stxxl::block_scheduler_algorithm_offline_lru_prefetching::block_scheduler_operation</a></div><div class="ttdeci">block_scheduler_type::block_scheduler_operation block_scheduler_operation</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01135">block_scheduler.h:1135</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a84441f1d252f0d864bd8e943116d2675"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a84441f1d252f0d864bd8e943116d2675">stxxl::block_scheduler_algorithm_offline_lru_prefetching::schedule_write</a></div><div class="ttdeci">write_read_request * schedule_write(const swappable_block_identifier_type sbid)</div><div class="ttdoc">Schedule an internal, possibly dirty swappable_block to write. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01210">block_scheduler.h:1210</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a5b06ba836854177ac837da9ab00836ec"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a5b06ba836854177ac837da9ab00836ec">stxxl::block_scheduler_algorithm_offline_lru_prefetching::~block_scheduler_algorithm_offline_lru_prefetching</a></div><div class="ttdeci">virtual ~block_scheduler_algorithm_offline_lru_prefetching()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01638">block_scheduler.h:1638</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664a29ae9b5557ad6310a40d0e203ea4e36f"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a29ae9b5557ad6310a40d0e203ea4e36f">stxxl::block_scheduler::op_acquire</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00277">block_scheduler.h:277</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a8fc7bfdfe21db217fef93d0cfc95b51f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a8fc7bfdfe21db217fef93d0cfc95b51f">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_blocks_type</a></div><div class="ttdeci">std::map&lt; swappable_block_identifier_type, scheduled_block_meta &gt; scheduled_blocks_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01138">block_scheduler.h:1138</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a3511b35486b0679b0957e5a4c6a824f3"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a3511b35486b0679b0957e5a4c6a824f3">stxxl::block_scheduler_algorithm::block_scheduler_algorithm</a></div><div class="ttdeci">block_scheduler_algorithm(block_scheduler_algorithm *old)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00556">block_scheduler.h:556</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ab8990567e282d669a1813d0759ed1742"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab8990567e282d669a1813d0759ed1742">stxxl::block_scheduler_algorithm_offline_lru_prefetching::shall_keep_internal_block</a></div><div class="ttdeci">bool shall_keep_internal_block(const scheduled_blocks_iterator &amp;schedule_meta, const bool ignore_first=true) const </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01418">block_scheduler.h:1418</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ab5f800ca83b31fbac851fe2deff1df19"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ab5f800ca83b31fbac851fe2deff1df19">stxxl::block_scheduler_algorithm_offline_lru_prefetching::deinitialize</a></div><div class="ttdeci">virtual void deinitialize(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01761">block_scheduler.h:1761</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler_1_1prediction__sequence__element_html"><div class="ttname"><a href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html">stxxl::block_scheduler::prediction_sequence_element</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00286">block_scheduler.h:286</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_aca78d122cd7d00ee256e631d07960f74"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aca78d122cd7d00ee256e631d07960f74">stxxl::block_scheduler_algorithm_offline_lru_prefetching::evictable_blocks_pop</a></div><div class="ttdeci">virtual swappable_block_identifier_type evictable_blocks_pop()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01657">block_scheduler.h:1657</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_ac6b2aa56f946e72d5010ea4b96932698"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#ac6b2aa56f946e72d5010ea4b96932698">stxxl::block_scheduler::get_prediction_sequence</a></div><div class="ttdeci">const prediction_sequence_type &amp; get_prediction_sequence() const </div><div class="ttdoc">Get the prediction_sequence. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00494">block_scheduler.h:494</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a2cf16844fc3781fac803acfa0db35b45"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a2cf16844fc3781fac803acfa0db35b45">stxxl::swappable_block::clean_async</a></div><div class="ttdeci">request_ptr clean_async(completion_handler on_cmpl=completion_handler())</div><div class="ttdoc">Write asyncronusly from internal_block to external_block if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00157">block_scheduler.h:157</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_aee8707ea1adcda8469cb66e3340499e6"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#aee8707ea1adcda8469cb66e3340499e6">stxxl::block_scheduler::prediction_sequence_type</a></div><div class="ttdeci">std::list&lt; prediction_sequence_element &gt; prediction_sequence_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00297">block_scheduler.h:297</a></div></div>
<div class="ttc" id="uint__types_8h_html_a0cfacbbf6e846521326f5de5ba3ecd05"><div class="ttname"><a href="uint__types_8h.html#a0cfacbbf6e846521326f5de5ba3ecd05">max</a></div><div class="ttdeci">static uint_pair max()</div><div class="ttdoc">return an uint_pair instance containing the largest value possible </div><div class="ttdef"><b>Definition:</b> <a href="uint__types_8h_source.html#l00241">uint_types.h:241</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_abfca40fefb1808cff4eb142037ba95d1"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#abfca40fefb1808cff4eb142037ba95d1">stxxl::block_scheduler_algorithm_simulation::evictable_blocks_pop</a></div><div class="ttdeci">virtual swappable_block_identifier_type evictable_blocks_pop()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00800">block_scheduler.h:800</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664a18acebfafdb17509d2c8917dd73abdfa"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a18acebfafdb17509d2c8917dd73abdfa">stxxl::block_scheduler::op_acquire_uninitialized</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00278">block_scheduler.h:278</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_afc7cd4c92aacaeba89d436525acf83da"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#afc7cd4c92aacaeba89d436525acf83da">stxxl::block_scheduler_algorithm_simulation::dummy_block</a></div><div class="ttdeci">internal_block_type dummy_block</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00755">block_scheduler.h:755</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_aba6fcf8ac2d74213701c135696cfe103"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#aba6fcf8ac2d74213701c135696cfe103">stxxl::block_scheduler_algorithm::return_free_internal_block_to_block_scheduler</a></div><div class="ttdeci">void return_free_internal_block_to_block_scheduler(internal_block_type *iblock)</div><div class="ttdoc">Return an internal_block to the block_scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00547">block_scheduler.h:547</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a55d5c4ef712a2c31716a84d0e2ee069e"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a55d5c4ef712a2c31716a84d0e2ee069e">stxxl::block_scheduler_algorithm_offline_lru_prefetching::prediction_sequence_type</a></div><div class="ttdeci">block_scheduler_type::prediction_sequence_type prediction_sequence_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01134">block_scheduler.h:1134</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a08ceaf03709cae6aca65632beadd6a4f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a08ceaf03709cae6aca65632beadd6a4f">stxxl::block_scheduler_algorithm_offline_lfd::evictable_blocks_pop</a></div><div class="ttdeci">virtual swappable_block_identifier_type evictable_blocks_pop()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01022">block_scheduler.h:1022</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ab860575cde314de079efa3ff62c5e057"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ab860575cde314de079efa3ff62c5e057">stxxl::swappable_block::internal_block_type</a></div><div class="ttdeci">typed_block&lt; raw_block_size, ValueType &gt; internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00042">block_scheduler.h:42</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a7142e962ec1fbb06b09a66b6c6385d01"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7142e962ec1fbb06b09a66b6c6385d01">stxxl::block_scheduler_algorithm_offline_lru_prefetching::internal_block_type</a></div><div class="ttdeci">block_scheduler_type::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01130">block_scheduler.h:1130</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_ad7953b9b53549e70688870a5a1d66a28"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ad7953b9b53549e70688870a5a1d66a28">stxxl::block_scheduler_algorithm_simulation::acquire</a></div><div class="ttdeci">virtual internal_block_type &amp; acquire(const swappable_block_identifier_type sbid, const bool uninitialized=false)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00807">block_scheduler.h:807</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a689782ee68f2ef9584bc81f4dadd670a"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a689782ee68f2ef9584bc81f4dadd670a">stxxl::block_scheduler_algorithm::swappable_blocks_resize</a></div><div class="ttdeci">virtual void swappable_blocks_resize(swappable_block_identifier_type)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00565">block_scheduler.h:565</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html">stxxl::block_scheduler_algorithm_offline_lfd::priority</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00898">block_scheduler.h:898</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a329981f27351bba02ed5190405efc664"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a329981f27351bba02ed5190405efc664">stxxl::swappable_block::fill_default</a></div><div class="ttdeci">void fill_default()</div><div class="ttdoc">Fill block with default data, is supposed to be overwritten by subclass. Has to be internal...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00136">block_scheduler.h:136</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a6dd9c1d0dc54c654d69d46c861e54d65"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a6dd9c1d0dc54c654d69d46c861e54d65">stxxl::swappable_block::~swappable_block</a></div><div class="ttdeci">~swappable_block()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00067">block_scheduler.h:67</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a9466198ff87b6a3f6fd40851f1f359a7"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a9466198ff87b6a3f6fd40851f1f359a7">stxxl::block_scheduler_algorithm_online_lru::acquire</a></div><div class="ttdeci">virtual internal_block_type &amp; acquire(const swappable_block_identifier_type sbid, const bool uninitialized=false)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00650">block_scheduler.h:650</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html_af34562bb10fc9d66a3b23fcef06c261f"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html#af34562bb10fc9d66a3b23fcef06c261f">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request::write_req</a></div><div class="ttdeci">request_ptr write_req</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01158">block_scheduler.h:1158</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a8aa0d5185a48e05983630d5170e220a3"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8aa0d5185a48e05983630d5170e220a3">stxxl::block_scheduler_algorithm_simulation::last_op_release</a></div><div class="ttdeci">bool last_op_release</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00753">block_scheduler.h:753</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a36155ae2264124dfaea08bef48b38720"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a36155ae2264124dfaea08bef48b38720">stxxl::block_scheduler_algorithm_offline_lru_prefetching::schedule_read</a></div><div class="ttdeci">void schedule_read(scheduled_blocks_iterator block_to_read)</div><div class="ttdoc">Schedule an internal and external block to read. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01255">block_scheduler.h:1255</a></div></div>
<div class="ttc" id="queue_html"><div class="ttname"><a href="queue.html">queue</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_aaa3fc841fa42190d87ffd5258bb3653e"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#aaa3fc841fa42190d87ffd5258bb3653e">stxxl::block_scheduler_algorithm_offline_lfd::deinitialize</a></div><div class="ttdeci">virtual void deinitialize(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01093">block_scheduler.h:1093</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_ac3b773d78bd95f72dae2fbc7ede5ba75"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#ac3b773d78bd95f72dae2fbc7ede5ba75">stxxl::block_scheduler_algorithm::explicit_timestep</a></div><div class="ttdeci">virtual void explicit_timestep()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00576">block_scheduler.h:576</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request_html"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1write__read__request.html">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_read_request</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01152">block_scheduler.h:1152</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a069aa8d725c782a5f6abc413253492cd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a069aa8d725c782a5f6abc413253492cd">stxxl::block_scheduler_algorithm::release</a></div><div class="ttdeci">virtual void release(swappable_block_identifier_type sbid, const bool dirty)=0</div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ad3e3acdfc3410f9dec8a000008e17a8a"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ad3e3acdfc3410f9dec8a000008e17a8a">stxxl::swappable_block::is_dirty</a></div><div class="ttdeci">bool is_dirty() const </div><div class="ttdoc">If the external_block does not hold valid data. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00074">block_scheduler.h:74</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_aa1812d2f6fa54b407bf5b771b66070b5"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#aa1812d2f6fa54b407bf5b771b66070b5">stxxl::swappable_block::swappable_block</a></div><div class="ttdeci">swappable_block()</div><div class="ttdoc">Create in uninitialized state. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00064">block_scheduler.h:64</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a354693aa80756064868f8d3e0b85c40e"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a354693aa80756064868f8d3e0b85c40e">stxxl::block_scheduler::time_type</a></div><div class="ttdeci">int_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00257">block_scheduler.h:257</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a27592e930c9dbcfcf1dd30dae61dc7dd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a27592e930c9dbcfcf1dd30dae61dc7dd">stxxl::block_scheduler_algorithm_offline_lfd::internal_block_type</a></div><div class="ttdeci">block_scheduler_type::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00886">block_scheduler.h:886</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html">stxxl::block_scheduler_algorithm_offline_lfd</a></div><div class="ttdoc">Block scheduling algorithm caching via the longest forward distance policy (offline). </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00881">block_scheduler.h:881</a></div></div>
<div class="ttc" id="verbose_8h_html_a5c9c9a313fce566f1125def71e512cd8"><div class="ttname"><a href="verbose_8h.html#a5c9c9a313fce566f1125def71e512cd8">STXXL_ERRMSG</a></div><div class="ttdeci">#define STXXL_ERRMSG(x)</div><div class="ttdef"><b>Definition:</b> <a href="verbose_8h_source.html#l00080">verbose.h:80</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_adf27aa7c5395ae589a0b9f267e19687b"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#adf27aa7c5395ae589a0b9f267e19687b">stxxl::block_scheduler_algorithm_online_lru::block_scheduler_algorithm_online_lru</a></div><div class="ttdeci">block_scheduler_algorithm_online_lru(block_scheduler_type &amp;bs)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00624">block_scheduler.h:624</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ad2b434ef1b94bfcd09351c773edb1214"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ad2b434ef1b94bfcd09351c773edb1214">stxxl::swappable_block::attach_internal_block</a></div><div class="ttdeci">void attach_internal_block(internal_block_type *iblock)</div><div class="ttdoc">Attach an internal_block, making the block internal. Has to be not internal. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00179">block_scheduler.h:179</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a02622af166af4b0de17a6a7f0dc039d1"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a02622af166af4b0de17a6a7f0dc039d1">stxxl::swappable_block::dirty</a></div><div class="ttdeci">bool dirty</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00048">block_scheduler.h:48</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a8beaa8bbf84339718bc1c9218246e9bf"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a8beaa8bbf84339718bc1c9218246e9bf">stxxl::block_scheduler::algo</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; * algo</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00316">block_scheduler.h:316</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_aaf3bb63e85ecfeab08b919f8046f56d3"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#aaf3bb63e85ecfeab08b919f8046f56d3">stxxl::block_scheduler_algorithm_offline_lru_prefetching::scheduled_evictable_blocks</a></div><div class="ttdeci">std::set&lt; swappable_block_identifier_type &gt; scheduled_evictable_blocks</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01196">block_scheduler.h:1196</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a109d1ec473603f27bdf55d05e8623257"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a109d1ec473603f27bdf55d05e8623257">stxxl::block_scheduler_algorithm_offline_lru_prefetching::swappable_blocks_iterator</a></div><div class="ttdeci">std::vector&lt; SwappableBlockType &gt;::iterator swappable_blocks_iterator</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01136">block_scheduler.h:1136</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a7778f0fe1fae65f660a872d236140753"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a7778f0fe1fae65f660a872d236140753">stxxl::block_scheduler_algorithm_offline_lru_prefetching::block_scheduler_type</a></div><div class="ttdeci">block_scheduler&lt; SwappableBlockType &gt; block_scheduler_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01126">block_scheduler.h:1126</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a1ec395bdec16447a443dc81f3f968191"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a1ec395bdec16447a443dc81f3f968191">stxxl::block_scheduler_algorithm_offline_lru_prefetching::wait_on_write</a></div><div class="ttdeci">void wait_on_write(const swappable_block_identifier_type &amp;writing_block)</div><div class="ttdoc">Wait for the write to finish. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01375">block_scheduler.h:1375</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664af88a959b3e48f11f1657fbd36e0d9e0c"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664af88a959b3e48f11f1657fbd36e0d9e0c">stxxl::block_scheduler::op_deinitialize</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00281">block_scheduler.h:281</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a0a46913facc96d2db4a0147668506e3c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a0a46913facc96d2db4a0147668506e3c">stxxl::block_scheduler_algorithm_online_lru::swappable_block_identifier_type</a></div><div class="ttdeci">block_scheduler_type::swappable_block_identifier_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00592">block_scheduler.h:592</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a460fd740b98d884a800d0105434da982"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a460fd740b98d884a800d0105434da982">stxxl::swappable_block::is_external</a></div><div class="ttdeci">bool is_external() const </div><div class="ttdoc">If it has an external_block that holds valid data. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00082">block_scheduler.h:82</a></div></div>
<div class="ttc" id="namespacestxxl_html_a7501995ff616f0144a8bda727c266d1b"><div class="ttname"><a href="namespacestxxl.html#a7501995ff616f0144a8bda727c266d1b">stxxl::unsigned_type</a></div><div class="ttdeci">choose_int_types&lt; my_pointer_size &gt;::unsigned_type unsigned_type</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00064">types.h:64</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a4fe767f02671afa478901a9812658d50"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a4fe767f02671afa478901a9812658d50">stxxl::block_scheduler_algorithm_online_lru::evictable_blocks_empty</a></div><div class="ttdeci">virtual bool evictable_blocks_empty()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00644">block_scheduler.h:644</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority_html_a6a090e7b2f8ce616d2b9803a609d62bd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd_1_1priority.html#a6a090e7b2f8ce616d2b9803a609d62bd">stxxl::block_scheduler_algorithm_offline_lfd::priority::priority</a></div><div class="ttdeci">priority(const SwappableBlockType &amp;sblock, const std::pair&lt; bool, time_type &gt; &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00903">block_scheduler.h:903</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a9010803037a344ef3705a22e3723cc01"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a9010803037a344ef3705a22e3723cc01">stxxl::block_scheduler_algorithm::block_scheduler_algorithm</a></div><div class="ttdeci">block_scheduler_algorithm(block_scheduler_type &amp;bs)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00551">block_scheduler.h:551</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a6d118758bd51421802c0dc6b65ca60e6"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a6d118758bd51421802c0dc6b65ca60e6">stxxl::block_scheduler_algorithm_offline_lfd::get_free_internal_block</a></div><div class="ttdeci">internal_block_type * get_free_internal_block()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00941">block_scheduler.h:941</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a8fe149e5b20ca6e81f1d9a4cd921a699"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a8fe149e5b20ca6e81f1d9a4cd921a699">stxxl::swappable_block::reference_count</a></div><div class="ttdeci">int_type reference_count</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00049">block_scheduler.h:49</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a80edde4601a6f55cd62bff28a9588bd1"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a80edde4601a6f55cd62bff28a9588bd1">stxxl::block_scheduler_algorithm_offline_lfd::extract_external_block</a></div><div class="ttdeci">virtual external_block_type extract_external_block(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01108">block_scheduler.h:1108</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a79357521ac451edf13f492c1b584bf38"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a79357521ac451edf13f492c1b584bf38">stxxl::swappable_block::disk_allocation_offset</a></div><div class="ttdeci">static unsigned_type disk_allocation_offset</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00051">block_scheduler.h:51</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_af1e0b0b475976718f9df5c978fd831a1"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#af1e0b0b475976718f9df5c978fd831a1">stxxl::block_scheduler_algorithm::swappable_blocks</a></div><div class="ttdeci">std::vector&lt; SwappableBlockType &gt; &amp; swappable_blocks</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00535">block_scheduler.h:535</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a6b377c02c193b954cbeb95242e111931"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a6b377c02c193b954cbeb95242e111931">stxxl::block_scheduler_algorithm_online_lru::return_free_internal_block</a></div><div class="ttdeci">void return_free_internal_block(internal_block_type *iblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00613">block_scheduler.h:613</a></div></div>
<div class="ttc" id="verbose_8h_html_afec876b95f7d6cc4b0f0bd4c0d7d89a0"><div class="ttname"><a href="verbose_8h.html#afec876b95f7d6cc4b0f0bd4c0d7d89a0">STXXL_MSG</a></div><div class="ttdeci">#define STXXL_MSG(x)</div><div class="ttdef"><b>Definition:</b> <a href="verbose_8h_source.html#l00073">verbose.h:73</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a69411e687e9f699a6717b8f93b7bffa2"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a69411e687e9f699a6717b8f93b7bffa2">stxxl::block_scheduler_algorithm_simulation::internal_block_type</a></div><div class="ttdeci">block_scheduler_type::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00737">block_scheduler.h:737</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a6f236bedac0e32c1a1cd3294f128d643"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6f236bedac0e32c1a1cd3294f128d643">stxxl::block_scheduler_algorithm_offline_lru_prefetching::swappable_block_identifier_type</a></div><div class="ttdeci">block_scheduler_type::swappable_block_identifier_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01132">block_scheduler.h:1132</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a9288166547ca91778d42d66ce8d69da4"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a9288166547ca91778d42d66ce8d69da4">stxxl::swappable_block::release</a></div><div class="ttdeci">void release()</div><div class="ttdoc">Release the block, i.e. subduct a reference. Has to be acquired. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00115">block_scheduler.h:115</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_afb7cb6f814b6fc18a370a2dd86ff7ea9"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#afb7cb6f814b6fc18a370a2dd86ff7ea9">stxxl::block_scheduler::return_free_internal_block</a></div><div class="ttdeci">void return_free_internal_block(internal_block_type *iblock)</div><div class="ttdoc">Return an internal_block to the freelist. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00348">block_scheduler.h:348</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler_1_1prediction__sequence__element_html_aa27a2c8f8894465bccc4d8ec9ac56638"><div class="ttname"><a href="structstxxl_1_1block__scheduler_1_1prediction__sequence__element.html#aa27a2c8f8894465bccc4d8ec9ac56638">stxxl::block_scheduler::prediction_sequence_element::prediction_sequence_element</a></div><div class="ttdeci">prediction_sequence_element(block_scheduler_operation op, swappable_block_identifier_type id, int_type time)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00292">block_scheduler.h:292</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_af15cd4274e5e8e00fe7a164bf861c50c"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#af15cd4274e5e8e00fe7a164bf861c50c">stxxl::block_scheduler::release</a></div><div class="ttdeci">void release(const swappable_block_identifier_type sbid, const bool dirty)</div><div class="ttdoc">Release the given block. Has to be in pairs with acquire. Pairs may be nested and interleaved...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00402">block_scheduler.h:402</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_ae3aa47bbbbc161de8607bfe253aab9e2"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ae3aa47bbbbc161de8607bfe253aab9e2">stxxl::block_scheduler_algorithm_simulation::release</a></div><div class="ttdeci">virtual void release(swappable_block_identifier_type sbid, const bool dirty)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00822">block_scheduler.h:822</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_af3110fade4db2bbf84349468bbd0fc14"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#af3110fade4db2bbf84349468bbd0fc14">stxxl::block_scheduler_algorithm_simulation::extract_external_block</a></div><div class="ttdeci">virtual external_block_type extract_external_block(swappable_block_identifier_type sbid)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00853">block_scheduler.h:853</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html">stxxl::block_scheduler</a></div><div class="ttdoc">Schedules swapping of blocks and provides blocks for temporary storage. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00250">block_scheduler.h:250</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a9907cf3901ddbf5a12f7c8ad7a19c407"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a9907cf3901ddbf5a12f7c8ad7a19c407">stxxl::block_scheduler_algorithm_offline_lfd::time_type</a></div><div class="ttdeci">block_scheduler_algorithm_type::time_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00889">block_scheduler.h:889</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_af6b89f29756f96d643e34a0851fa9655"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#af6b89f29756f96d643e34a0851fa9655">stxxl::block_scheduler_algorithm_offline_lru_prefetching::write_scheduled_blocks</a></div><div class="ttdeci">write_scheduled_blocks_type write_scheduled_blocks</div><div class="ttdoc">Holds swappable_blocks, whose internal block has been taken away but the clean did not finish yet...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01202">block_scheduler.h:1202</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_abfdac0d00d3257776eaba98e81023707"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#abfdac0d00d3257776eaba98e81023707">stxxl::block_scheduler::~block_scheduler</a></div><div class="ttdeci">~block_scheduler()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00363">block_scheduler.h:363</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_ad1640b01510cdad9af156b6df4b23350"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#ad1640b01510cdad9af156b6df4b23350">stxxl::block_scheduler_algorithm::internal_block_type</a></div><div class="ttdeci">block_scheduler_type::internal_block_type internal_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00525">block_scheduler.h:525</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a8ca0ab112127d0c3bf989729c70c3f5c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a8ca0ab112127d0c3bf989729c70c3f5c">stxxl::block_scheduler_algorithm_simulation::return_free_internal_block</a></div><div class="ttdeci">void return_free_internal_block(internal_block_type *iblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00757">block_scheduler.h:757</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a051d2cf7aac69f10c5a21f40f93a5664a201a77b2f6ccf48a0967a6e423eaed78"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a051d2cf7aac69f10c5a21f40f93a5664a201a77b2f6ccf48a0967a6e423eaed78">stxxl::block_scheduler::op_release</a></div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00279">block_scheduler.h:279</a></div></div>
<div class="ttc" id="classstxxl_1_1addressable__fifo__queue_html"><div class="ttname"><a href="classstxxl_1_1addressable__fifo__queue.html">stxxl::addressable_fifo_queue&lt; swappable_block_identifier_type &gt;</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a6d577e3b34b1094794732deb5fa689c8"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a6d577e3b34b1094794732deb5fa689c8">stxxl::block_scheduler::get_current_algorithm</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; * get_current_algorithm() const </div><div class="ttdoc">Return the current algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00487">block_scheduler.h:487</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_af3c8616c047a26bb94967fe11a8b62d2"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#af3c8616c047a26bb94967fe11a8b62d2">stxxl::block_scheduler_algorithm_offline_lfd::swappable_block_identifier_type</a></div><div class="ttdeci">block_scheduler_type::swappable_block_identifier_type swappable_block_identifier_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00888">block_scheduler.h:888</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_ac78e67c44fe70392c3d1cc56fd316302"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#ac78e67c44fe70392c3d1cc56fd316302">stxxl::block_scheduler_algorithm_simulation::prediction_sequence_element_type</a></div><div class="ttdeci">block_scheduler_type::prediction_sequence_element prediction_sequence_element_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00740">block_scheduler.h:740</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a4796c36c347e619f8816b5136a9be68f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a4796c36c347e619f8816b5136a9be68f">stxxl::block_scheduler_algorithm_offline_lru_prefetching::block_scheduler_algorithm_offline_lru_prefetching</a></div><div class="ttdeci">block_scheduler_algorithm_offline_lru_prefetching(block_scheduler_type &amp;bs)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01629">block_scheduler.h:1629</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_afd1812ef75949fda17466db2a5700103"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#afd1812ef75949fda17466db2a5700103">stxxl::block_scheduler_algorithm_online_lru::evictable_blocks_pop</a></div><div class="ttdeci">virtual swappable_block_identifier_type evictable_blocks_pop()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00647">block_scheduler.h:647</a></div></div>
<div class="ttc" id="typed__block_8h_html"><div class="ttname"><a href="typed__block_8h.html">typed_block.h</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_a7aa480658d54469bd49a8bba3fd80b87"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#a7aa480658d54469bd49a8bba3fd80b87">stxxl::block_scheduler_algorithm::block_scheduler_type</a></div><div class="ttdeci">block_scheduler&lt; SwappableBlockType &gt; block_scheduler_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00524">block_scheduler.h:524</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ad00d560b35894bea7835241b5dfaca8c"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad00d560b35894bea7835241b5dfaca8c">stxxl::block_scheduler_algorithm_offline_lru_prefetching::release</a></div><div class="ttdeci">virtual void release(swappable_block_identifier_type sbid, const bool dirty)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01704">block_scheduler.h:1704</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a62db447e39ef062712daa7f3061d20fd"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a62db447e39ef062712daa7f3061d20fd">stxxl::swappable_block::make_dirty_if</a></div><div class="ttdeci">bool make_dirty_if(const bool make_dirty)</div><div class="ttdoc">Invalidate external data if true. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00099">block_scheduler.h:99</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html">stxxl::block_scheduler_algorithm</a></div><div class="ttdoc">Interface of a block scheduling algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00235">block_scheduler.h:235</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a22ae307a6132728d847301f8dcefee46"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a22ae307a6132728d847301f8dcefee46">stxxl::block_scheduler_algorithm_online_lru::block_scheduler_algorithm_type</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; block_scheduler_algorithm_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00589">block_scheduler.h:589</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_ac9fd66839e267bc0b0234f7e62c146b2"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#ac9fd66839e267bc0b0234f7e62c146b2">stxxl::swappable_block::extract_external_block</a></div><div class="ttdeci">external_block_type extract_external_block()</div><div class="ttdoc">Extract the swappable_blocks data in an external_block. The block gets uninitialized. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00222">block_scheduler.h:222</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a023226bf5952e8e3c45572e6b9a05899"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a023226bf5952e8e3c45572e6b9a05899">stxxl::block_scheduler::switch_algorithm_to</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; * switch_algorithm_to(block_scheduler_algorithm&lt; SwappableBlockType &gt; *new_algo)</div><div class="ttdoc">Switch the used algorithm, e.g. to simulation etc.. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00478">block_scheduler.h:478</a></div></div>
<div class="ttc" id="classstxxl_1_1noncopyable_html"><div class="ttname"><a href="classstxxl_1_1noncopyable.html">stxxl::noncopyable</a></div><div class="ttdef"><b>Definition:</b> <a href="noncopyable_8h_source.html#l00033">noncopyable.h:33</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lfd_html_a17f402a7534dbe9d1e14f10e888a4141"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lfd.html#a17f402a7534dbe9d1e14f10e888a4141">stxxl::block_scheduler_algorithm_offline_lfd::~block_scheduler_algorithm_offline_lfd</a></div><div class="ttdeci">virtual ~block_scheduler_algorithm_offline_lfd()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01007">block_scheduler.h:1007</a></div></div>
<div class="ttc" id="classstxxl_1_1request_html"><div class="ttname"><a href="classstxxl_1_1request.html">stxxl::request</a></div><div class="ttdoc">Request object encapsulating basic properties like file and offset. </div><div class="ttdef"><b>Definition:</b> <a href="request_8h_source.html#l00038">request.h:38</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a5f46e0029f83fdcf816d385908aae531"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a5f46e0029f83fdcf816d385908aae531">stxxl::block_scheduler_algorithm_simulation::explicit_timestep</a></div><div class="ttdeci">virtual void explicit_timestep()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00872">block_scheduler.h:872</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a70aacef91a44d3fab5708d0f740c7e90"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a70aacef91a44d3fab5708d0f740c7e90">stxxl::block_scheduler_algorithm_offline_lru_prefetching::evictable_blocks_empty</a></div><div class="ttdeci">virtual bool evictable_blocks_empty()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01651">block_scheduler.h:1651</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__simulation_html_a2d498be7696dcbff03a9009d0ba410ef"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__simulation.html#a2d498be7696dcbff03a9009d0ba410ef">stxxl::block_scheduler_algorithm_simulation::time_type</a></div><div class="ttdeci">block_scheduler_algorithm_type::time_type time_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00741">block_scheduler.h:741</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm_html_af309feba9c42e185ad1fc9e196fdd055"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm.html#af309feba9c42e185ad1fc9e196fdd055">stxxl::block_scheduler_algorithm::bs</a></div><div class="ttdeci">block_scheduler_type &amp; bs</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00532">block_scheduler.h:532</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a50586f9247ff1115ee6ab077de53e204"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a50586f9247ff1115ee6ab077de53e204">stxxl::block_scheduler_algorithm_online_lru::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00616">block_scheduler.h:616</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_ac02adcabf478f5b923a23fd5fa1528b2"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#ac02adcabf478f5b923a23fd5fa1528b2">stxxl::block_scheduler::free_internal_blocks</a></div><div class="ttdeci">std::stack&lt; internal_block_type * &gt; free_internal_blocks</div><div class="ttdoc">holds free internal_blocks with attributes reset. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00309">block_scheduler.h:309</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_abc89df6c9303c361b61ed9c834e12990"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#abc89df6c9303c361b61ed9c834e12990">stxxl::swappable_block::is_internal</a></div><div class="ttdeci">bool is_internal() const </div><div class="ttdoc">If it has an internal_block. The internal_block implicitly holds valid data. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00070">block_scheduler.h:70</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__online__lru_html_a326322bf01386cd2677dd1db0ec8cefd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__online__lru.html#a326322bf01386cd2677dd1db0ec8cefd">stxxl::block_scheduler_algorithm_online_lru::external_block_type</a></div><div class="ttdeci">block_scheduler_type::external_block_type external_block_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00591">block_scheduler.h:591</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ad8a5b3bb99cce1437b30be5f76802c7f"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ad8a5b3bb99cce1437b30be5f76802c7f">stxxl::block_scheduler_algorithm_offline_lru_prefetching::block_scheduler_algorithm_type</a></div><div class="ttdeci">block_scheduler_algorithm&lt; SwappableBlockType &gt; block_scheduler_algorithm_type</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01129">block_scheduler.h:1129</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_ae733b230d8d247ce95410d261754d996"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#ae733b230d8d247ce95410d261754d996">stxxl::block_scheduler_algorithm_offline_lru_prefetching::deinit</a></div><div class="ttdeci">void deinit()</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01599">block_scheduler.h:1599</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a6c906b88c48e175cacf0542c45057ddd"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a6c906b88c48e175cacf0542c45057ddd">stxxl::block_scheduler_algorithm_offline_lru_prefetching::wait_on_write</a></div><div class="ttdeci">void wait_on_write(const scheduled_blocks_iterator &amp;schedule_meta)</div><div class="ttdoc">Wait for the write of the giver to finish. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01385">block_scheduler.h:1385</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_html_a557212eee781cd4c982720137702ea20"><div class="ttname"><a href="classstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching.html#a557212eee781cd4c982720137702ea20">stxxl::block_scheduler_algorithm_offline_lru_prefetching::return_free_internal_block</a></div><div class="ttdeci">void return_free_internal_block(internal_block_type *iblock)</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01500">block_scheduler.h:1500</a></div></div>
<div class="ttc" id="namespace_8h_html_abf690e046efa58c85da1f450bb098392"><div class="ttname"><a href="namespace_8h.html#abf690e046efa58c85da1f450bb098392">STXXL_END_NAMESPACE</a></div><div class="ttdeci">#define STXXL_END_NAMESPACE</div><div class="ttdef"><b>Definition:</b> <a href="namespace_8h_source.html#l00017">namespace.h:17</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a0d7f69f73a444b3439df0b51b30925e0"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a0d7f69f73a444b3439df0b51b30925e0">stxxl::swappable_block::get_internal_block</a></div><div class="ttdeci">internal_block_type &amp; get_internal_block()</div><div class="ttdoc">Get a reference to the data-block. Has to be acquired. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00129">block_scheduler.h:129</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a18207a3b273714d69d260056996f85ae"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a18207a3b273714d69d260056996f85ae">stxxl::block_scheduler::acquire</a></div><div class="ttdeci">internal_block_type &amp; acquire(const swappable_block_identifier_type sbid, const bool uninitialized=false)</div><div class="ttdoc">Acquire the given block. Has to be in pairs with release. Pairs may be nested and interleaved...</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00395">block_scheduler.h:395</a></div></div>
<div class="ttc" id="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write_html_ab309fff437ed58b629a0a89bc5437822"><div class="ttname"><a href="structstxxl_1_1block__scheduler__algorithm__offline__lru__prefetching_1_1read__after__write.html#ab309fff437ed58b629a0a89bc5437822">stxxl::block_scheduler_algorithm_offline_lru_prefetching::read_after_write::wrr</a></div><div class="ttdeci">write_read_request * wrr</div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l01166">block_scheduler.h:1166</a></div></div>
<div class="ttc" id="classstxxl_1_1block__scheduler_html_a3490b18520b7f4df24b4f3637d26d23c"><div class="ttname"><a href="classstxxl_1_1block__scheduler.html#a3490b18520b7f4df24b4f3637d26d23c">stxxl::block_scheduler::extract_external_block</a></div><div class="ttdeci">external_block_type extract_external_block(const swappable_block_identifier_type sbid)</div><div class="ttdoc">Deinitialize the swappable_block and return it&amp;#39;s contents in an external_block. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00422">block_scheduler.h:422</a></div></div>
<div class="ttc" id="classstxxl_1_1swappable__block_html_a4a64229a9636b30ead15d59d4965db09"><div class="ttname"><a href="classstxxl_1_1swappable__block.html#a4a64229a9636b30ead15d59d4965db09">stxxl::swappable_block::is_evictable</a></div><div class="ttdeci">bool is_evictable() const </div><div class="ttdoc">If it holds an internal_block but does not need it. </div><div class="ttdef"><b>Definition:</b> <a href="block__scheduler_8h_source.html#l00090">block_scheduler.h:90</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_2ef3d45016f8136b9aff5ceb64fb3161.html">stxxl</a></li><li class="navelem"><a class="el" href="dir_3d4857524531d475c56368c3068e9332.html">bits</a></li><li class="navelem"><a class="el" href="dir_bc6b0a06bb04e35383e101a5ba9a3f9d.html">mng</a></li><li class="navelem"><a class="el" href="block__scheduler_8h.html">block_scheduler.h</a></li>
    <li class="footer"><a href="http://stxxl.sourceforge.net">STXXL 1.4.1</a> - Generated on Wed Oct 29 2014 10:13:27 for STXXL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
